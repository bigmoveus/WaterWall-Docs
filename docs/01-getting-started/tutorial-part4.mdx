---
sidebar_position: 4
---

# ุขููุฒุด ุจุฎุด ฺูุงุฑู 

## ุฏุณุชูโุจูุฏ Node ูุง ๐

ุฏุฑ ูุงุชุฑูุงู ูุง Node ูุง ุฑุง ุจู **ณ ฺฏุฑูู** ุชูุณู ูโฺฉูู:

### ๐ **ุฏุณุชู ุงูู - Node ูุง ูุงู ด**
Node ูุง ูุณุชูุฏ ฺฉู ุจุง ฺฉุงูฺฉุดู ฺฉุงุฑ ูโฺฉููุฏ. ุงู ููุฏ ูุง ูุงู ด ูุณุชูุฏ (ูุงู ท ูู ูโุดู ฺฏูุช ฺฉู ูููู ูุงู ุงูพูฺฉุดู ูุณุช)

**โ ูุฒุงุง:**
- ุงู ููุฏ ูุง ุจุฑุง ุงุฌุฑุง ูุงุฒ ุจู ุฏุณุชุฑุณ root ูุฏุงุฑูุฏ
- ฺฉุงุฑ ฺฉุฑุฏู ุจุง ุขูโูุง ุณุงุฏูโุชุฑ ุงุณุช

**๐ ูุซุงูโูุง ุงู ุฏุณุชู:**
- `TcpConnector/Listener`
- `UdpConnector/Listener`
- `HalfDuplexClient/Server`
- `ReverseClient/Server`

โ๏ธ **ูฺฉุชู ููู:** ุงู ููุฏ ูุง ูุจุงุฏ ุจุง ููุฏ ูุง ูุงู ณ ุฏุฑ ฺฉ ุฒูุฌุฑ ูุฑุงุฑ ุจฺฏุฑูุฏุ ฺูู ููุฏ ูุง ูุงู ณ ุจุง ูพฺฉุช ฺฉุงุฑ ูโฺฉููุฏ ูู ุตุฑูุงู ุฑู ฺฉุงูฺฉุดู.

### ๐ **ุฏุณุชู ุฏูู - Node ูุง ูุงู ณ**
Node ูุง ูุณุชูุฏ ฺฉู ุจู ูุงู ณ ุชุนูู ุฏุงุฑูุฏ ู ูพฺฉุชโูุง ุฎุงู ูุงู IP ุฑุง ููุชูู ูโฺฉููุฏ.

**๐ ูุซุงูโูุง ุงู ุฏุณุชู:**
- `TunDevice`
- `RawDevice`
- `IpOverreider`
- `IpManipulator`

โ๏ธ **ูฺฉุชู ููู:** ุงูโูุง ูุจุงุฏ ุจุง ููุฏ ูุง ูุงู ด ูุงุท ุดููุฏ ุง ุฒูุฌุฑ ุดููุฏ.

### ๐ **ุฏุณุชู ุณูู - Node ูุง ุชุจุฏูโฺฏุฑ**
Node ูุง ูุณุชูุฏ ฺฉู ุงฺฏุฑ ุฏุงุฎู ุฒูุฌุฑ ุจุงูุฏุ ุจุงุนุซ ูโุดููุฏ ฺฉู ุจุชูุงูุฏ ููุฏ ูุง ูุงู ณ ู ด ุฑุง ููุฒูุงู ุฏุฑ ุขู ุฒูุฌุฑ ุจู ูู ูุชุตู ฺฉูุฏ.

#### **ูุซุงู ุงูู:** `PacketToConnection` ๐
ุงู ููุฏ ุจุฑุง ูพุงุฏู ฺฉุฑุฏู ฺุฒ ูุซู TunMode ุฑู ฺฉูุงูุชโูุง ุงุณุชูุงุฏู ูโุดูุฏ ู ฺฉุงุฑุจุฑุฏุด ุชุฎุตุต ุงุณุช.

**๐ ูุญูู ฺฉุงุฑ:**
- ูุจู ุงุฒ ุขู ุจุงุฏ ููุฏ ูุง ูุงู ณ ุจุงุดูุฏ
- ุจุนุฏ ุงุฒ ุขู ููุฏ ูุง ูุงู ด ูุฑุงุฑ ูโฺฏุฑูุฏ
- ููุงูุทูุฑ ฺฉู ุงุฒ ุงุณูุด ูพุฏุงุณุชุ ูพฺฉุช ูุง ฺฉู ุงุฒ ฺูพ ุจู ุฑุงุณุช ูุงุฑุฏ ูโุดููุฏ ุฑุง ูพุฑุฏุงุฒุด ูโฺฉูุฏ
- ูุชูุฌู ูโุดูุฏ ฺฉู ุณุณุชู ุนุงูู ุจู ฺฉุฌุง ูโุฎูุงูุฏ ฺฉุงูฺฉุดู ุจุฒูุฏ
- ุจุนุฏ ุฎูุฏุด ููุงู ฺฉุงูฺฉุดู ุฑุง ุงุฌุงุฏ ูโฺฉูุฏ ุฏุงุฎู ูุงุชุฑูุงู

#### **ูุซุงู ุฏูู:** `PacketAsData` ู `DataAsPacket` ๐ฆ
ุฏู node ุฒุฑ ูุฒ ุจู ุงู ุฏุณุชู ุชุนูู ุฏุงุฑูุฏ:

**๐ `PacketAsData`:**
- ููุช ูพฺฉุชโูุง ุงุฒ ุณูุช ฺูพ ุจู ุฑุงุณุช ุญุฑฺฉุช ูโฺฉููุฏุ ุขูโูุง ุฑุง ุฏุฑ ฺฉ ฺฉุงูฺฉุดู ูุฑุงุฑ ูโุฏูุฏ
- ููุช ุฏุงุฏูโูุง ุงุฒ ุฑุงุณุช ุจู ฺูพ ุญุฑฺฉุช ูโฺฉููุฏุ ุงูุชุธุงุฑ ุฏุงุฑุฏ ฺฉู ุขูโูุง ูพฺฉุช ุจุงุดูุฏ
- ูพฺฉุชโูุง ุฑุง ุจู ุณูุช ฺูพ ููุชูู ูโฺฉูุฏ

- ุณูุช ุฑุงุณุช ุงู node ุจุงุฏ ูุงู ด ุจุงุดู ู ุณูุช ฺูพุด ูุงู ณ


**๐ `DataAsPacket`:**
- ุฏููุงู ููู ฺฉุงุฑ ุฑุง ุงูุฌุงู ูโุฏูุฏ ููุท ุฌูุชุด ุจุฑุนฺฉุณ ุงุณุช
- ุณูุช ุฑุงุณุช ุงู node ุจุงุฏ ูุงู ณ ุจุงุดู ู ุณูุช ฺูพุด ูุงู ด

**๐ฏ ฺฉุงุฑุจุฑุฏ:** ุงู ููุฏ ูุง ุจุฑุง ุฒูุงู ูุณุชูุฏ ฺฉู ุดูุง ฺุฒ ูุซู OpenVPN ุง WireGuard ูโุฎูุงูุฏ ุฏุฑุณุช ฺฉูุฏ.

---

## ูุซุงู ุนูู: OpenVPN ๐

OpenVPN ูพฺฉุชโูุง ุฑุง ูุณุชููุงู ุงุฒ ฺฉ tun device ุฏุฑุงูุช ูโฺฉูุฏ ู ุณูพุณ ุขูโูุง ุฑุง ุงุฒ ฺฉ ฺฉุงูฺฉุดู ฺฉู ุจุง TLS ุฑูุฒ ุดุฏู ุนุจูุฑ ูโุฏูุฏ. ุงูโุทูุฑ ฺฉ ุณูุงุฑู ุณุงุฏู ู ุฏุฑ ุนู ุญุงู ูุฏุฑุชููุฏ ุณุงุฎุชู ูโุดูุฏ.

### ๐ฑ **ุณูุช ฺฉูุงูุช:** 

```mermaid
flowchart LR;
    TunDevice --> PacketAsData --> TlsClient --> TcpConnector
```

### ๐ฅ๏ธ **ุณูุช ุณุฑูุฑ VPN:**

```mermaid
flowchart LR;
    TcpListener --> TlsServer --> DataAsPacket --> TunDevice
```

**๐ก ูฺฉุชู:** ุญุช ูุงุฒ ุจู ุชุบุฑ IP ูุง ูู ูุฏุงุฑุฏ. ููุท ฺฉ ฺฉุงููุฏ ุชููุฏ NAT ุงุฒ ุฏุชุง TunDevice ุฑู VPN Server ุงุฌุฑุง ูโุดูุฏ ุชุง ูพฺฉุชโูุง ุจู ุจุฑูู ูุฏุงุช ุดููุฏ.

ููฺูู ฺฉ ฺฉุงููุฏ ุณูุช ฺฉูุงูุช ุงุฌุฑุง ูโุดูุฏ ฺฉู ุงุฒ ุณุณุชู ุนุงูู ูโุฎูุงูุฏ ุชูุงู ูพฺฉุชโูุง ุฑุง ุจู TunDevice ูุฏุงุช ฺฉูุฏ.


โ๏ธ **ูฺฉุชู ุฏุฑููุฑุฏ OpenVPN:** ุงูุงู ฺฉ node ูููุฒ ุฏุฑ ุฒูุฌุฑ ูุณุช ฺฉู ฺฉุงูู ุดูุฏ ู ุจุชูุงูุฏ ูพุงุฏูโุงุด ฺฉูุฏ. ุขู ูู ููุฏ ุงุญุฑุงุฒ ููุชโฺฉููุฏู ูพุฑูุชฺฉู OpenVPN ุงุณุช. ุงู ูููุฒ ูพุงุฏูโุณุงุฒ ูุดุฏู (ุงูุงู ฺฉู ุฏุงุฑู ุงู ุฑุง ูโููุณู)ุ ูู WireGuard ฺฉุงูู ุงุณุช.

---

## ูุซุงู ุนูู: WireGuard ๐

ุงฺฏุฑ ุดูุง ุจุง WireGuard ุขุดูุง ุจุงุดุฏุ ุขู ูุฒ ุฎู ุดุจู OpenVPN ุงุณุชุ ููุชูุง ฺูุฏ ููุทู ููุช ุฏุงุฑุฏ ฺฉู ุขู ุฑุง ุจู ฺฉ ุงุฒ ุจูุชุฑู ูพุฑูุชฺฉูโูุง ุฏุฑ ุดุฑุงุท ุงุฏูโุขู (ุจุฏูู ููุชุฑูฺฏ) ุชุจุฏู ูโฺฉูุฏ:

### ๐ฅ **ูุฒุงุง WireGuard:**
1. **๐ก UDP:** ุงุฒ UDP ุจุฑุง ุงูุชูุงู ุฏุชุง ุงุณุชูุงุฏู ูโฺฉูุฏ ู ุจุฑุง ููู ูพฺฉุชโูุง ุจู ุตูุฑุช ฺฉูพุงุฑฺู ููุชูู ูโุดููุฏ (ุงูุจุชู ุจุง MTU ฺฉูุชุฑ)

2. **๐ ุงูฺฏูุฑุชู ุฑูุฒูฺฏุงุฑ ูุฏุฑู:** ุจุฑ ูุจูุง ุฑูุฒูฺฏุงุฑ ูุฏุฑู ู ูููุงู ุจุง ูุญูุฑุช `Curve25519` ู `ChaCha20-Poly1305` ุณุงุฎุชู ุดุฏู ุงุณุช
   - ุณุจฺฉ ู CPU-friendly ุงุณุช
   - ููุฏุดฺฉ ฺฉูุชุฑ ูุงุฒ ุฏุงุฑุฏ
   - ุงูู ุงุณุช


### ๐ **ุณุงุฎุชุงุฑ WireGuard ุจุง ูุงุชุฑูุงู:**

#### **ุณูุช ฺฉูุงูุช:** 

```mermaid
flowchart LR;
    TunDevice --> PacketAsData --> WireGuardDevice --> UdpStateLessSocket
```

#### **ุณูุช ุณุฑูุฑ VPN:**

```mermaid
flowchart LR;
    TunDevice --> PacketAsData --> WireGuardDevice --> UdpStateLessSocket
```

๐ค **ุณูุงู:** ุดุงุฏ ุจุฑุงุชุงู ุงู ุณุงุฎุชุงุฑ ฺฉู ุนุฌุจ ุจุงุดุฏุ ุจุฎุตูุต ุงูฺฉู ุณุฑูุฑ ุงุฑุงู ุดุจู ุณุฑูุฑ ุฎุงุฑุฌ ุดุฏู ุงุณุช. ุจุงุฏ ุจฺฏูู WireGuard ฺฉูุงู ุงูโุทูุฑ ุงุณุช!

**๐ ุฌูุช ุจุฑุนฺฉุณ:** ุงฺฏุฑ ููุฏ ูุง ุฑุง ุจุฑุนฺฉุณ ุจฺูุฏ ูู ููู ุณูุงุฑู ุฏุฑูโุขุฏ ู ุฏุฑุณุช ฺฉุงุฑ ูโฺฉูุฏ:

#### **ุณูุช ฺฉูุงูุช (ุจุฑุนฺฉุณ):**

```mermaid
flowchart LR;
    UdpStateLessSocket --> WireGuardDevice --> DataAsPacket --> TunDevice
```

#### **ุณูุช ุณุฑูุฑ VPN (ุจุฑุนฺฉุณ):**

```mermaid
flowchart LR;
    UdpStateLessSocket --> WireGuardDevice --> DataAsPacket --> TunDevice
```

### ๐ **ฺุฑุง UdpStateLessSocketุ**

ุนูุช ุงูฺฉู ุงุฒ `UdpListener` / `UdpConnector` ุงุณุชูุงุฏู ูุดุฏู ุงู ุงุณุช ฺฉู WireGuard ุณุงุฎุชุงุฑุด ุงูโฺฏููู ุทุฑุงุญ ุดุฏู ฺฉู ุงุฒ ููุงู socket ู ูพูุฑุช ฺฉู ุจุง ุขู ูพฺฉุช ุงุฑุณุงู ูโฺฉูุฏุ ูพฺฉุช ูู ุฏุฑุงูุช ูโฺฉูุฏ.

**โ ูุดฺฉู ููุฏ ูุง ูุจู:**
- `UdpListener` ููุท ฺฏูุดโุฏููุฏู ุจูุฏ ู ููโุชูุงูุณุช ุดุฑูุนโฺฉููุฏู ุจุงุดุฏ ุจู ฺฉ peer
- `UdpConnector` ููุท ุงุฑุณุงูโฺฉููุฏู ุจูุฏ ู ููโุชูุงูุณุช ููุช ฺฉ peer ูุจู ุงุฒ ุขู ูพฺฉุช ุฏุงุฏูุ ุขู ุฑุง ูพุฑุฏุงุฒุด ฺฉูุฏ

**โ ุฑุงู ุญู:** ฺฉ node ุฌุฏุฏ ุณุงุฎุชู ุดุฏ ฺฉู ุงุฒ ฺฉ ูพูุฑุช ูู ุจูุฑุณุชุฏ ู ูู ฺฏูุด ฺฉูุฏ ุจู ุงุณู `UdpStateLessSocket`

๐ **ูฺฉุชู:** ฺฉุงููุฏูุง ฺฉู ุจุงุฏ ุชูุธู ุดููุฏ ุฏููุงู ูุซู OpenVPN ุงุณุช ู ูฺฉุชู ุฏฺฏุฑ ูุฏุงุฑุฏ.

### ๐ **ููุงุจุน ุจุดุชุฑ:**

ูู ุชุฑุฌุญ ูโุฏูู ุงุฒ ุงูุฌุง ุจู ุจุนุฏ ูุงู JSON ุจุฑุงุชุงู ูฺฏุฐุงุฑู. ุจู ูุธุฑู ููุงู ุฏุงฺฏุฑุงูโูุง ุจุฑุง ูููุฏู ุงูฺฉู ฺุทูุฑ ุจุงุฏ ุจุณุงุฒุฏุดุงู ฺฉุงู ุงุณุช.

ุฏุฑ ุตูุญู **Examples** ูโุชูุงูุฏ ฺฉุงููโุชุฑ ุฏุฑููุฑุฏ ุณุงุฎุชู ุณูุงุฑููุง WireGuard ุง OpenVPN ุงุทูุงุนุงุช ฺฉุณุจ ฺฉูุฏ.


---

## ุชุบุฑ ู ุจุงุฒ ุจุง ูพฺฉุชโูุง ๐ฎ

### ๐ **ุณูุงุฑู Packet Tunnel**

ุงูุฌุง ูโุฎูุงูู ุฏุฑููุฑุฏ ฺฉ ุณูุงุฑู ุชููู ุชูุถุญ ุฏูู ฺฉู ุงุณูุด **Packet Tunnel** ุงุณุช.

**๐ ุณูุงุฑู:** ุดูุง ุจู ฒ ุณุฑูุฑ (ุงุฑุงู ู ุฎุงุฑุฌ) ฺฉ ุชููู ุจุฑูุฑุงุฑ ูโฺฉูุฏ ฺฉู ุฏุฑ ุงู ุจู ูพฺฉุชโูุง ุจู ุดฺฉู ุบุฑุนุงุฏ ู ุชุบุฑ ุงูุชู ููุชูู ุฎูุงููุฏ ุดุฏ.

### ๐๏ธ **ฺฉุงุฑูุง ฺฉู ูโุชูุงู ฺฉุฑุฏ:**

1. **๐ ุฌุงุจูโุฌุง ฺฉุฑุฏู ุจุชโูุง TCP**
2. **๐ ุชุบุฑ identifier ุฏุฑ ูุฏุฑ IP** ุชุง ุจู ุตูุฑุช ุฌุนู ุจู ฺฉ ุงุฒ ูพุฑูุชฺฉูโูุง ุฒุฑ ุชุจุฏู ุดูุฏ:
   - [๐ List Of IP Layer Protocols](https://en.wikipedia.org/wiki/List_of_IP_protocol_numbers)
3. **๐งฉ ุชฺฉูโุชฺฉู ฺฉุฑุฏู ูพฺฉุชโูุง** (ุงู ุญุงูุช ูุงุฒ ุญุช ุจู ุงุฌุฑุง ูุงุชุฑูุงู ุฏุฑ ุณุฑูุฑ ุฎุงุฑุฌ ูุฏุงุฑุฏ)
4. **๐ ุชุฑฺฉุจ ุงู ุญุงูุชโูุง**

**๐ก ูฺฉุชู:** ุดูุง ูโุชูุงูุฏ ฒ ุง ฺูุฏ ููุฏ ุงุฒ ููุน `IpManipulator` ุจู ูู ุฒูุฌุฑ ฺฉูุฏ ู ุฏุฑ ูุฑ ฺฉุฏุงู ฺฉ ุชุบุฑ ุจู ูพฺฉุช ูุงู IP ุจุฏูุฏ. ูู ุฑู ฺฉ Node ููุท ูโุดูุฏ ฺฉ ุชุฑููุฏ ุฑู ูพฺฉุช ุงุฌุฑุง ฺฉุฑุฏุ ูู ุจุดุชุฑ.

### ๐ **ูุซุงู ุขููุฒุด: ุชุบุฑ Identifier**

ฺุฒ ฺฉู ูู ุจุฑุง ุขููุฒุด ุฏุฑ ูุธุฑ ฺฏุฑูุชูุ ุญุงูุช ุณุงุฏู **ุชุบุฑ identifier** ุงุณุช:

#### **๐ฎ๐ท ุณุฑูุฑ ุงุฑุงู:**


```mermaid
flowchart LR;
    TunDevice["TunDevice<br/>10.10.0.1/24"] --> IPO1[IpOverreider] --> IPO2[IpOverreider] --> IpManipulator --> IPO3[IpOverreider] --> IPO4[IpOverreider] --> RawSocket
    
    TcpListener["TcpListener<br/>443"] --> TcpConnector["TcpConnector<br/>10.10.0.2:443"]
```

#### **๐ ุณุฑูุฑ ุฎุงุฑุฌ:**

```mermaid
flowchart LR;
    RawSocket --> IPO1[IpOverreider] --> IPO2[IpOverreider] --> IpManipulator --> IPO3[IpOverreider] --> IPO4[IpOverreider] --> TunDevice["TunDevice<br/>10.10.0.1/24"]
```

### ๐ค **ุณูุงู: ฺุฑุง ุงูโููู IpOverreiderุ**

ุงููู ุณูุงู ฺฉู ุจุฑุงุชุงู ูพุด ูโุขุฏ ุงู ุงุณุช ฺฉู ุงู ููู node ุงุฒ ููุน `IpOverreider` ุจุฑุง ฺ ูุณุชูุฏุ

ุฏุฑ ุณุฑูุฑ ุงุฑุงู ุชูุถุญ ูโุฏูู (ุจุฑุง ุณุฑูุฑ ุฎุงุฑุฌ ูู ุนูุชุด ููู ุงุณุช):

### ๐ **ูุดฺฉู ุงููุช ุขูพ ูุจุฏุง ูพฺฉุช ูุง:**
ุงฺฏุฑ ุดูุง ฺฉ ูพฺฉุช ุจู ุจุฑูู ุงุฒ ุณุฑูุฑ ุงุฑุณุงู ฺฉูุฏ ฺฉู IP ูุจุฏุงุด IP ุฎูุฏ ุณุฑูุฑ ูุจุงุดุฏุ ูพฺฉุช drop ูโุดูุฏ ุชูุณุท ุฏุชุงุณูุชุฑ ุจู ุฎุงุทุฑ ุฌููฺฏุฑ ุงุฒ DDoS.

### ๐ฏ **ูุธูู ูุฑ IpOverreider:**

#### **๐ค ููุฏูุง UP (ฺูพ ุจู ุฑุงุณุช):**
1. **ููุฏ ุงูู:** IP ูุจุฏุง ูพฺฉุช ฺฉู ุงุฒ tun device ฺฏุฑูุชู ุฑุง IP ุฎูุฏ ุณุฑูุฑ ูุฑุงุฑ ูโุฏูุฏ
2. **ููุฏ ุฏูู:** IP ููุตุฏ ุฑุง ุจุฑุงุจุฑ ุจุง IP ุณุฑูุฑ ุฎุงุฑุฌ ูุฑุงุฑ ูโุฏูุฏ (ฺูู ูพฺฉุชโูุง IP ููุตุฏุดุงู ููุช ุฏุฑุงูุช ูโุดููุฏ `10.10.0.2` ูุณุชูุฏ)

#### **๐ฅ ููุฏูุง DOWN (ุฑุงุณุช ุจู ฺูพ):**
ุฏุฑ ุชูุธูุงุช ฒ ููุฏ ุฏฺฏุฑุ `direction = down` ุชูุธู ุดุฏู ุงุณุช. ุงู ุนู ุงู ฒ ููุฏ ููุท ูพฺฉุช ูุง ุฑุง ฺฉุงุฑ ุฏุงุฑูุฏ ฺฉู ุงุฒ ุฑุงุณุช ุจู ฺูพ ูโุขูุฏ.

**๐ ุชุบุฑุงุช ููุฑุฏ ูุงุฒ:**
- ุงู ูพฺฉุชโูุง ุฏููุงู ูุดฺฉู IP ุฏุงุฑูุฏ
- IP ูุจุฏุง: IP ุณุฑูุฑ ุฎุงุฑุฌ โ ุจุงุฏ ุจุดูุฏ `10.10.0.2`
- IP ููุตุฏ: IP ุณุฑูุฑ ุงุฑุงู โ ุจุงุฏ ุจุดูุฏ IP ุฎูุฏ tun device ฺฉู `10.10.0.1` ุงุณุช

**๐ก ูุฏู:** ูุง ุฏุงุฑู tun device ุฑุง ฺฉุงููุงู ุดุจูโุณุงุฒ ูโฺฉูู ุจู ฺฉ ุฏุณุชฺฏุงู ฺฉู ุจู ุตูุฑุช ุฌุงุฏู ุงุฑุชุจุงุท ุจุง ุฏูุง ุจุฑูู ุจุฑูุฑุงุฑ ูโฺฉูุฏ!

### โ๏ธ **ููุฏ IpManipulator:**

ูุง ุจู ุงู ููุฏ ูโฺฏูู ฺฉู ุจุงุฏ **ุชุบุฑ identifier** ุงูุฌุงู ุฏูุฏ. ุงู ฺฉุงุฑ ุจุง ุชูุธูุงุชุด ุงูุฌุงู ูโุดูุฏ.

**๐ protoswap-tcp:** ุนู ูุฑ ูพฺฉุช ฺฉู ุงุฒ ููุน TCP ุจูุฏ ุฑุง ุชุบุฑ ุจู ุขู ุนุฏุฏ ฺฉู ฺฏูุชู ุดุฏูุ ู ุฏุฑ ูพฺฉุชโูุง ุจุฑฺฏุดุช ูู ูุฑ ูพฺฉุช ุงุฒ ุขู ุนุฏุฏ ุจูุฏ ุชุบุฑ ูโฺฉูุฏ ุจู TCP.


ุงู ููุฏ ูู ูโุชูุงูุฏ ุฏุฑุงูุช ู ูู ุงุฑุณุงู ฺฉูุฏ. ุจุฑุง ููู ุฏุฑ ุงู ุณูุงุฑู ูู ุงฺฏุฑ ฺฉู ุฒูุฌุฑ ุฑุง ุจุฑุนฺฉุณ ุจฺูุฏุ ุฏุฑุณุช ฺฉุงุฑ ูโฺฉูุฏ.

**๐ง ูุญูู ฺฉุงุฑ:**
- ุจุฑุง ุงุฑุณุงู: ุงุฒ ฺฉ raw socket ุงุณุชูุงุฏู ูโฺฉูุฏ
- ุจุฑุง ุฏุฑุงูุช: ุงุฒ ูุงุฑูุงู ฺฉูฺฉ ูโฺฏุฑุฏ ุชุง ูพฺฉุชโูุง ุฏุฑุงูุช ุจู ูฺ ูุฌู ุฏุณุช ุณุณุชู ุนุงูู ูุฑุณูุฏ

**โ๏ธ ฺุฑุง ููู ุงุณุชุ** ุฏุฑ ุบุฑ ุงู ุตูุฑุช ุณุณุชู ุนุงูู ุฎูุฏ (ูุซูุงู ุจุง TCP-reset) ูพุงุณุฎ ูโุฏุงุฏ ู ููโุดุฏ ุจุง ููุงู socket ุฏุฑุงูุช ฺฉุฑุฏ.

**๐ป ููุฏูุฒ:** ุฏุฑ ุณุณุชู ุนุงูู ููุฏูุฒ ููู ฺฉุงุฑ ุจุง ุงุณุชูุงุฏู ุงุฒ driver ุงูุฌุงู ูโุดูุฏ.

### ๐ **ูุชุฌู:**

ูพุณ ุงุฒ ุจุฑูุฑุงุฑ ุชููู ุฏุฑ ุณุฑูุฑ ุงุฑุงูุ IP `10.10.0.2` ุฑุง ูโุชูุงู IP ุฎุงุฑุฌ ูุฑุถ ฺฉุฑุฏ ฺฉู ุงุฑุชุจุงุท ุจุง ุขู ุงุฒ ููุชุฑูฺฏ ุนุจูุฑ ฺฉุฑุฏู ู ุญุช ูโุดูุฏ ping ฺฏุฑูุช! ๐

**๐ ูพูุฑุช ููุฑูุงุฑุฏ:** ูุง ุฏุฑ ุณุฑูุฑ ุงุฑุงู ูพูุฑุช ดดณ ูู ุจู ุงู IP ููุฑูุงุฑุฏ ฺฉุฑุฏูุ ูู ุดูุง ูโุชูุงูุฏ:
- ุงุฒ iptables ุจุฑุง ูพูุฑุช ููุฑูุงุฑุฏ ุงุณุชูุงุฏู ฺฉูุฏ
- ุง ุงฺฏุฑ ูพูู ุฑู ุณุฑูุฑ ุงุฑุงู ูุตุจ ุงุณุชุ ฺฉ ุชููู outbound ุจุฑูุฑุงุฑ ฺฉูุฏ

**๐ ุณุฑูุฑ ุฎุงุฑุฌ:** IP `10.10.0.2` ุงูฺฏุงุฑ ุดุฏู IP ุณุฑูุฑ ุงุฑุงู ู ูโุชูุงูุฏ ุจุง ุขู ุงุฑุชุจุงุท ุฏุงุดุชู ุจุงุดุฏ.

---

## ๐ **ูุงู JSON**

ูู ูุงู JSON ุงู ุฑูุด ุฑุง ุจุฑุงุชุงู ูููุฌุง ูุฑุงุฑ ุฎูุงูู ุฏุงุฏ. 

### ๐ฎ๐ท **ุณุฑูุฑ ุงุฑุงู:**

```json
{
    "name": "my tun",
    "type": "TunDevice",
    "settings": {
        "device-name": "wtun0",
        "device-ip": "10.10.0.1/24"
    },
    "next": "ipovsrc"
},
{
    "name": "ipovsrc",
    "type": "IpOverrider",
    "settings": {
        "direction": "up",
        "mode": "source-ip",
        "ipv4": "IP_IRAN"
    },
    "next": "ipovdest"
},
{
    "name": "ipovdest",
    "type": "IpOverrider",
    "settings": {
        "direction": "up",
        "mode": "dest-ip",
        "ipv4": "IP_KHAREJ"
    },
    "next": "manip"
},
{
    "name": "manip",
    "type": "IpManipulator",
    "settings": {
        "protoswap-tcp": YOUR_DESIRED_PROTOCOL
    },
    "next": "ipovsrc2"
},
{
    "name": "ipovsrc2",
    "type": "IpOverrider",
    "settings": {
        "direction": "down",
        "mode": "source-ip",
        "ipv4": "10.10.0.2"
    },
    "next": "ipovdest2"
},
{
    "name": "ipovdest2",
    "type": "IpOverrider",
    "settings": {
        "direction": "down",
        "mode": "dest-ip",
        "ipv4": "10.10.0.1"
    },
    "next": "rd"
},
{
    "name": "rd",
    "type": "RawSocket",
    "settings": {
        "capture-filter-mode": "source-ip",
        "capture-ip": "IP_KHAREJ"
    }
},
{
    "name": "input",
    "type": "TcpListener",
    "settings": {
        "address": "0.0.0.0",
        "port": 443,
        "nodelay": true
    },
    "next": "output"
},
{
    "name": "output",
    "type": "TcpConnector",
    "settings": {
        "nodelay": true,
        "address": "10.10.0.2",
        "port": 443
    }
}
```

๐ **ูฺฉุงุช ููู:**
- ุฏุฑ ุงู ูุงู ุจุงุฏ IP ุณุฑูุฑ ุฎุงุฑุฌ ู ุงุฑุงู ุฑุง ูุฑุงุฑ ุฏูุฏ
- ุจู ุฌุง `YOUR_DESIRED_PROTOCOL` ฺฉ ุนุฏุฏ ุจู ฐ ุชุง ฒตต ูุฑุงุฑ ุฏูุฏ

### ๐จ **ูุดุฏุงุฑ ุงููุช:**
- ุจุฑุฎ ุงุนุฏุงุฏ ุฑุณฺฉ ููุชุฑ ุดุฏู IP ุณุฑูุฑ ุฎุงุฑุฌ ุฏุฑ ฑ ุฑูุฒ ุฑุง ุฏุงุฑูุฏ (ูุนูููุงู ุจุงูุง ดฐ)
- ุจุฑุฎ ุงุนุฏุงุฏ ุชููู ุฑุง ุจโูุนู ูโฺฉููุฏ ูุซู ุนุฏุฏ ถ (TCP) ู ุนุฏุฏ ฑท (UDP)

**๐ฐ ุฏุฑููุฑุฏ ุนุฏุฏ ฑ:**
- ุงุณุชูุงุฏู ุงุฒ ุนุฏุฏ ฑ ุจุงุนุซ ุชุจุฏู ุดุฏู ุจู **ping tunnel** ูโุดูุฏ
- ุงู ุนุฏุฏ ุฑุณฺฉ ููุชุฑูฺฏ ุฏุงุฑุฏ ุฏุฑ ุชุฑุงูฺฉ ุจุงูุง
- ูู ุฏุฑ ุดุฑุงุท ูุช ูู ูโุชูุงูุฏ ูุฌุงุชโุจุฎุด ุจุงุดุฏ

### ๐ **ูพุฑูุชฺฉูโูุง IP:**
- [๐ List Of IP Layer Protocols](https://en.wikipedia.org/wiki/List_of_IP_protocol_numbers)


### ๐ก **ูพุดุชุจุงู ุงุฒ UDP:**

ุงู ุฑูุด ุฏุฑ ุญุงู ุญุงุถุฑ ููุท ูพฺฉุชโูุง TCP ุฑุง ูุฑุงุด ูโฺฉูุฏ ฺูู ูุง ุงุฒ `protoswap-tcp` ุงุณุชูุงุฏู ฺฉุฑุฏูโุงู. ุงฺฏุฑ ูุตุฏ ุฏุงุฑุฏ UDP ูู ุนุจูุฑ ุฏูุฏ:

**๐ง ุฑุงู ุญู:**
- ููุฏุงุฑ `protoswap-udp` ุฑุง ูู ุงุถุงูู ฺฉูุฏ ุจู ุชูุธูุงุช `IpManipulator`
- ุงู ุจุฑุง ุนุจูุฑ ุฏุงุฏู ฺฉุงููฺฏโูุง ูุซู WireGuard ุง L2TP ุงุณุชูุงุฏู ูโุดูุฏ
- ูโุชูุงูุฏ ุจุง ุขู ฺฉุงููฺฏโูุง ููุงุณุจ ฺฏู ุฏุฑุณุช ฺฉูุฏ

ุฏูุช ฺฉูุฏ ููุฏุงุฑ protoswap-udp ุจุง protoswap-tcp ูุจุงุฏ ฺฉ ุจุงุดู!โ๏ธ

### ๐ **ูุซุงู ุนูู:**


โ๏ธ **ูฺฉุชู:** ุชูุธูุงุช IpManipulator ุฏุฑ ุณุฑูุฑ ุงุฑุงู ู ุฎุงุฑุฌ ุฏููุงู ุจุงุฏ ฺฉ ุจุงุดุฏ

### ๐ **ุณุฑูุฑ ุฎุงุฑุฌ:**

```json
{
    "name": "rd",
    "type": "RawSocket",
    "settings": {
        "capture-filter-mode": "source-ip",
        "capture-ip": "IP_IRAN"
    },
    "next": "ipovsrc"
},
{
    "name": "ipovsrc",
    "type": "IpOverrider",
    "settings": {
        "direction": "down",
        "mode": "source-ip",
        "ipv4": "IP_KHAREJ"
    },
    "next": "ipovdest"
},
{
    "name": "ipovdest",
    "type": "IpOverrider",
    "settings": {
        "direction": "down",
        "mode": "dest-ip",
        "ipv4": "IP_IRAN"
    },
    "next": "manip"
},
{
    "name": "manip",
    "type": "IpManipulator",
    "settings": {
        "protoswap-tcp": "YOUR_DESIRED_PROTOCOL"
    },
    "next": "ipovsrc2"
},
{
    "name": "ipovsrc2",
    "type": "IpOverrider",
    "settings": {
        "direction": "up",
        "mode": "source-ip",
        "ipv4": "10.10.0.2"
    },
    "next": "ipovdest2"
},
{
    "name": "ipovdest2",
    "type": "IpOverrider",
    "settings": {
        "direction": "up",
        "mode": "dest-ip",
        "ipv4": "10.10.0.1"
    },
    "next": "my tun"
},
{
    "name": "my tun",
    "type": "TunDevice",
    "settings": {
        "device-name": "wtun0",
        "device-ip": "10.10.0.1/24"
    }
}
```

๐ **ูฺฉุชู:** ุงฺฏุฑ ุขููุฒุด ณ ุฑุง ูุฏุฏูโุงุฏุ ุงู ูุงูโูุง JSON ุฑุง ุจุงุฏ ุฏุงุฎู ุจุฎุด `nodes` ุฏุฑ ฺฉุงููฺฏ ูุงู ฺฉู ุณุงุฎุชูโุงุฏ ูุฑุงุฑ ุฏูุฏ.

---

## ๐ **ุชุฑููุฏ ููุน ุฏูู: ุฌุงุจูโุฌุง Flag ูุง TCP**

ุฏุฑ ููู ุญุงูุช ุชููู ฺฉู ุงุฌุฑุง ฺฉุฑุฏูุ ูโุชูุงูู ุฑูุด ุฑุง ุนูุถ ฺฉูู ู ุจู ุฌุง ุชุบุฑ identifierุ ุจุชโูุง flag ูุง TCP ุฑุง ุจุง ูู ุฌุงุจูโุฌุง ฺฉูู.

**๐ฏ ูุฏู:** ุงูโุทูุฑ ูุงุฑูุงู ู ฺฉูุงู ุณุณุชูโูุง ูุงู ูฺ ุฏุฑฺฉ ููโุชูุงููุฏ ุงุฒ ฺฉุงูฺฉุดู ูพุฏุง ฺฉููุฏ.

### ๐ท๏ธ **Flag ูุง TCP:**

ุดูุง ุจุชโูุง ุฒุฑ ุฑุง ุฏุฑ ุงุฎุชุงุฑ ุฏุงุฑุฏ:

| Flag | ูุงู ฺฉุงูู | ูุนู |
|------|-----------|------|
| `cwr` | Congestion Window Reduced | ูุดุงูโุฏููุฏู ฺฉุงูุด ูพูุฌุฑู ุงุฒุฏุญุงู |
| `ece` | ECN-Echo | ูุดุงูโุฏููุฏู ุงุนูุงู ุงุฒุฏุญุงู ุตุฑุญ |
| `urg` | Urgent | ูุดุงูโุฏููุฏู ุฏุงุฏูโูุง ุงุถุทุฑุงุฑ |
| `ack` | Acknowledgment | ุชุฃุฏ ุฏุฑุงูุช ุฏุงุฏูโูุง |
| `psh` | Push | ุฏุฑุฎูุงุณุช ุงุฑุณุงู ููุฑ ุฏุงุฏูโูุง |
| `rst` | Reset | ุจุงุฒูุดุงู ฺฉุงูฺฉุดู |
| `syn` | Synchronize | ุดุฑูุน ฺฉุงูฺฉุดู |
| `fin` | Finish | ูพุงุงู ฺฉุงูฺฉุดู |

### โ๏ธ **ููุงุฏุฑ ูุงุจู ุงุณุชูุงุฏู:**

ุจุฑุง ุชุบุฑ ูุฑ ุจุช ูโุชูุงูุฏ ุงุฒ ููุงุฏุฑ ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

ูฺฉุชู ูููุช: 
ุงูุงู ฺฉู ุฏุงุฑุฏ ุงู ุฑู ูุฎููุฏ ูุณุฎู 1.40 ููุชุดุฑ ุดุฏู ฺฉู ูู ุจุนุฏุด ุงููุฏู ุชู ุชูุธูุงุช ุงุณู ูุง ูุฑุจูุท ุจู ุงู ุฑูุด ุฑู ุงูพุฏุช ฺฉุฑุฏู ุจู ฺุฒ ฺฉู
ุงู ูพุงู ูุณุช ุ ูพุณ ุจูุชุฑู ุจุฑุง ุงู ุฑูุด ูููุชุง ูุณุฎู ุฑู ุงุฒ 
[ุงฺฉุดู ฺฏุช ูุงุจ](https://github.com/radkesvat/WaterWall/actions/runs/16782085024)
ุฏุงูููุฏ ฺฉูุฏ.



```
"off", "on", "packet->cwr", "packet->ece", "packet->urg", "packet->ack", "packet->psh", "packet->rst", "packet->syn", "packet->fin"
```



### ๐๏ธ **ูพุงุฏูโุณุงุฒ:**

ุงู ฺฉุงุฑ ุฎู ุณุงุฏู ุงุณุช. ุฏุฑ ุณุฑูุฑ ุงุฑุงู ฺฉุงู ุงุณุช ููุฏ `IpManipulator` ุฑุง ุจู ุงู ุดฺฉู ุชุบุฑ ุฏูุฏ:

**ูุซุงู:** ุฌุงุจูโุฌุง flag ูุง `ack` ู `fin`:

### ๐ฎ๐ท **ุณุฑูุฑ ุงุฑุงู:**

```json
{
    "name": "manip",
    "type": "IpManipulator",
    "settings": {
        "up-tcp-bit-ack": "packet->fin",
        "up-tcp-bit-fin": "packet->ack",

        "dw-tcp-bit-fin": "packet->ack",
        "dw-tcp-bit-ack": "packet->fin"
    },
    "next": "ipovsrc2"
}
```

**๐ ุชูุถุญุงุช:**

- **up:** ุชูุธูุงุช ูพฺฉุชโูุง ฺฉู ุงุฒ ุณูุช ฺูพ ุจู ุฑุงุณุช ุงู ููุฏ ุญุฑฺฉุช ูโฺฉููุฏ
- **dw:** ุชูุธูุงุช ูพฺฉุชโูุง ฺฉู ุงุฒ ุณูุช ุฑุงุณุช ุจู ฺูพ ุงู ููุฏ ุญุฑฺฉุช ูโฺฉููุฏ

**โก ูฺฉุชู ููู:** ุนููุงุช ุชุบุฑ ุจุชโูุง ุฏุฑ ูพฺฉุช ููุฒูุงู ุงูุฌุงู ูโุดูุฏ ู ุฎุท ุจู ุฎุท ูุณุช.

**๐ ูุซุงู:**
- `"up-tcp-bit-ack": "packet->fin"` ุนู ุจุช `ack` ููุฏุงุฑุด ุงุฒ ุจุช `fin` ูพฺฉุช ุงุตู ุฎูุงูุฏู ุดูุฏ
- ูพฺฉุช ุงุตู ุชุง ูพุงุงู ุนููุงุช ุชุบุฑ ููโฺฉูุฏุ ุจูุงุจุฑุงู ุฏุฑ ุฎุท ุจุนุฏ ูโุชูุงูู ุงุฒ ููุฏุงุฑ `ack` ูพฺฉุช ุงุตู ุจุฑุง ุณุงุฎุชู ุจุช `fin` ูพฺฉุช ุฌุฏุฏ ุงุณุชูุงุฏู ฺฉูู


### ๐ **ุณุฑูุฑ ุฎุงุฑุฌ:**

```json
{
    "name": "manip",
    "type": "IpManipulator",
    "settings": {
        "up-tcp-bit-ack": "packet->fin",
        "up-tcp-bit-fin": "packet->ack",

        "dw-tcp-bit-fin": "packet->ack",
        "dw-tcp-bit-ack": "packet->fin"
    },
    "next": "ipovsrc2"
}
```

**๐ ูฺฉุงุช ูพุงุฏูโุณุงุฒ:**

- ฺฉุงููฺฏ ุณุฑูุฑ ุฎุงุฑุฌ ูุดุงุจู ุงุฑุงู ูโุดูุฏ
- ุงฺฏุฑ ฺฉุงููฺฏ ุณุฑูุฑ ุฎุงุฑุฌ ุฑุง ุจู ุตูุฑุช ุจุฑุนฺฉุณ ฺุฏู ุจุงุดุฏุ ุจุงุฏ ุฌูุชโูุง ุฑุง ุจุฑุนฺฉุณ ฺฉูุฏ ฺฉู ุงูุจุชู ูุง ุฏุฑ ุขููุฒุดโูุง ฺฉู ุฏุงุฏู ุฌูุช ููุดู ฺูพ ุจู ุฑุงุณุช ุงุณุช


ุงูุงู ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ุงู ุฑูุด ฺฉู ุขููุฒุด ุฏุงุฏู ฺฉุงู ุงุณุช ุชูุธูุงุช IpManipulator ุฑุง ุฏุฑ ููุงู ูุซุงู packet tunnel ฺฉู ุจุงูุง ฺฏูุชู ูุทุงุจู ุขููุฒุด ุนูุถ ฺฉูุฏ




**โ๏ธ ูุดุฏุงุฑ:** ูุฑ ููุฏ `IpManipulator` ุฑุง ุจุฑุง ฺฉ ุชุฑููุฏ ุงุณุชูุงุฏู ฺฉูุฏ. ุชูุธูุงุช ฒ ุชุฑููุฏ ุฑุง ุฏุฑ ฺฉ ููุฏ ูุฑุงุฑ ูุฏูุฏ.

**๐ ูุณุช ุชุฑููุฏโูุง:**

1. **๐ protoswap:** ููุงู ุฑูุด packet tunnel ฺฉู ุจุงูุง ฺฏูุชู
2. **๐ท๏ธ tcp bit changes:** ฺฉู ุงูุฌุง ุชูุถุญ ุฏุงุฏู ุชูุธูุงุชุด ฺฺฏููู ุงุณุช  
3. **๐งฉ sni-blender:** ฺฉู ุฏุฑ ุงุฏุงูู ุชูุถุญ ุฎูุงูู ุฏุงุฏ


ุดูุง ูโุชูุงูุฏ ูุฑ ฺูุฏ ุชุง ููุฏ IpManipulator ุจุณุงุฒุฏ ู ุจู ูู ุฒูุฌุฑ ฺฉูุฏ ู ุฏุฑ ูุฑ ฺฉุฏุงู ุชุฑููุฏูุง ูุชูุงูุช ุฑุง ุงุนูุงู ฺฉูุฏ


---

## ๐งฉ **ุชุฑููุฏ ุชฺฉูโุชฺฉู ฺฉุฑุฏู ูพฺฉุชโูุง (SNI Blender)**

ููฺูู ูโุชูุงูุฏ ุจุง ููู ููุฏ `IpManipulator` ูพฺฉุชโูุง `TlsClientHello` ุฑุง ุชฺฉูโุชฺฉู ฺฉูุฏ ุจู ูพฺฉุชโูุง ูุงู IP.

### ๐ฏ **ฺฉุงุฑุจุฑุฏูุง:**
- ๐ ุจุฑุง ุชููู ุฒุฏูุ ุฏุงููู ุฎูุฏ ุฑุง ูุฎู ฺฉูุฏ
- โ๏ธ ุจู CloudFlare ุชููู ุจุฒูุฏ
- ๐ ุฏุฑ ุญุงูุช ุณุฑูุฑ ูุณุ ุณุงุชโูุง ูพุดุช CDN ูุซู ูุชูุจ ุฑุง ุจุงุฒ ฺฉูุฏ

### ๐ **ุชูุงูุช ุจุง ุฑูุดโูุง ุฏฺฏุฑ:**
ุงู ุฑูุด ุจุง fragmenting ฺฉู `gfw-knocker` ูุนุฑู ฺฉุฑุฏู ูุชูุงูุช ุงุณุช.

### โ๏ธ **ูุญูู ฺฉุงุฑ:**
1. ูพฺฉุช `client-hello` ุจู ูพฺฉุชโูุง ูุงู IP ุชฺฉูโุชฺฉู ูโุดูุฏ
2. ุจุนุฏ ุจุง ุชุฑุชุจ ุฑูุฏูู ุงุฑุณุงู ูโุดูุฏ
3. ุชุนุฏุงุฏ ูพฺฉุชโูุง ุฏุฑ ุชูุธูุงุช ูุงุจู ุชูุธู ุงุณุช (ุนุฏุฏ ด ูุนูููุงู ุฎูุจ ุงุณุช)

### ๐ **ุชุณุชโูุง ุงูุฌุงู ุดุฏู:**
- โ **ููุฑุงู ุงูู:** ุฏุฑ ุจุฑุฎ ูุงุฑูุงูโูุง ุงู ููุน ูพฺฉุช ฺฉูุงู drop ูโุดูุฏ
- โ **ุงุฑุงูุณู:** ุจุงุนุซ ุจุงุฒ ุดุฏู ุณุงุชโูุง ููุชุฑ ูพุดุช CDN ุดุฏ (ูุชูุจ ู ุบุฑู)
- ๐ฅ๏ธ **ุชุณุช ุฑู ููุฏูุฒ:** ฺูู ูุงุฒ ุจู ุณุฑูุฑ ูุฏุงุดุช

โ๏ธ **ูุดุฏุงุฑ:** ุฑู ูููโุฌุง ุฌูุงุจ ููโุฏูุฏุ ูู ุฑูุด ุฌุฏุฏ ุงุณุช.

### ๐๏ธ **ูพุงุฏูโุณุงุฒ:**

ุจุฑุง ุงู ฺฉุงุฑ ุฏุฑ ุณุฑูุฑ ุฎุงุฑุฌ ูุงุชุฑูุงู ูุจุงุฏ ฺฉุงุฑ ุงูุฌุงู ุฏูุฏ. ุฏุฑ ุณุฑูุฑ ุงุฑุงู ฺฉุงููฺฏ ุดูุง ุนุงุฏ ุจู ูพูุฑุช ดดณ ุณุฑูุฑ ุฎุงุฑุฌ ูุตู ูโุดูุฏ.

โ๏ธ **ูุงุฒ:** ฺฉุงููฺฏ ฺฉู ุฏุณุช ฺฉุงุฑุจุฑ ุฏุงุฑุฏ ุจุงุฏ TLS ุฏุงุดุชู ุจุงุดุฏ. ุงฺฏุฑ ูุฏุงุฑุฏุ ุจุงุฏ ุฏุฑ ูุงุชุฑูุงู ุจู ุฒูุฌุฑ ููุฏูุง `TlsClient/TlsServer` ุงุถุงูู ฺฉูุฏ.

ุฏุฑ ฺฉู ุนู ุณุฑูุฑ ุงุฑุงู ุจุงุฏ ุจู ุณุฑูุฑ ุฎุงุฑุฌ ุงุชุตุงู TLS ุจุฑูุฑุงุฑ ฺฉูุฏ ุชุง ุงู ุชุฑููุฏ ุจุชูุงูุฏ ุฏุงููู ุฑุง ูพุฏุง ฺฉูุฏ ู ุชฺฉูโุชฺฉู ฺฉูุฏ.

ุงฺฏุฑ ุชู ุฎูุฏ Xray TLS ูุนุงู ุจุงุดุฏ ฺฉู ุนู ฺฉุงููฺฏ ุฏุณุช ฺฉุงุฑุจุฑ ูู TLS ุงุณุช ู ูุงุฒ ูุณุช ูุงุชุฑูุงู ุฏุฑ ุณุฑูุฑ ุฎุงุฑุฌ ุงุฌุฑุง ุดูุฏ

ู ุฏุฑ ุบุฑ ุงู ุตูุฑุช ุจุงุฏ TLS tunnel ุจุณุงุฒุฏ ุจุง ูุงุชุฑูุงู ฺฉู ูุงุฒ ูโุดูุฏ ุฏุฑ ุณุฑูุฑ ุฎุงุฑุฌ ูู ุฑุงู ุจุงุดุฏ ุจุฑุง ููุฏ TlsServer

ุงฺฏุฑ ุจู ฺฉููุฏููุฑ ูโุฎูุงูุฏ ุชููู ุจุฒูุฏุ ูุงุชุฑูุงู ููุท ุฏุฑ ุณุฑูุฑ ุงุฑุงู ูุงุฒ ุงุณุช ฺฉู ุงุฌุฑุง ุดูุฏ

ุงูุฏูุงุฑู ููุธูุฑู ุงุฒ ุงู ุจุฎุด ุฑุง ุฎูุจ ุฑุณุงูุฏู ุจุงุดูุ ุฏุฑฺฉ ุงู ูุงุฒููุฏ ฺฉู ุดูุงุฎุช ุจุดุชุฑ ุงุฒ ุดุจฺฉู ู TLS ุงุณุช

ุดูุง ุจุง ุฏุงุฏู ููฺฉ ุงู ุขููุฒุด ุจู ฺุช GPTุ ูโุชูุงูุฏ ุงุฒ ุจุฎุดโูุง ูุฎุชูู ุงุฒ ุขู ุณูุงู ฺฉูุฏ ุชุง ุฌุฒุงุช ฺฉุงูู ุจูโุชุงู ุจุฏูุฏ

### ๐ฎ๐ท **ูุซุงู ุณุฑูุฑ ุงุฑุงู:**

```json
{
    "name": "my tun",
    "type": "TunDevice",
    "settings": {
        "device-name": "wtun0",
        "device-ip": "10.10.0.1/24"
    },
    "next": "ipovsrc"
},
{
    "name": "ipovsrc",
    "type": "IpOverrider",
    "settings": {
        "direction": "up",
        "mode": "source-ip",
        "ipv4": "IP_IRAN"
    },
    "next": "ipovdest"
},
{
    "name": "ipovdest",
    "type": "IpOverrider",
    "settings": {
        "direction": "up",
        "mode": "dest-ip",
        "ipv4": "IP_KHAREJ"
    },
    "next": "manip"
},
{
    "name": "manip",
    "type": "IpManipulator",
    "settings": {
        "sni-blender": true,
        "sni-blender-packets": 4
    },
    "next": "ipovsrc2"
},
{
    "name": "ipovsrc2",
    "type": "IpOverrider",
    "settings": {
        "direction": "down",
        "mode": "source-ip",
        "ipv4": "10.10.0.2"
    },
    "next": "ipovdest2"
},
{
    "name": "ipovdest2",
    "type": "IpOverrider",
    "settings": {
        "direction": "down",
        "mode": "dest-ip",
        "ipv4": "10.10.0.1"
    },
    "next": "rd"
},
{
    "name": "rd",
    "type": "RawSocket",
    "settings": {
        "capture-filter-mode": "source-ip",
        "capture-ip": "IP_KHAREJ"
    }
},

{
    "name": "input",
    "type": "TcpListener",
    "settings": {
        "address": "0.0.0.0",
        "port": 443,
        "nodelay": true
    },
    "next": "output"
},
{
    "name": "output",
    "type": "TcpConnector",
    "settings": {
        "nodelay": true,
        "address": "10.10.0.2",
        "port": 443
    }
}
```

๐ **ูฺฉุชู:** ุงูุฌุง ููุท ูุงุฒู ุงุณุช IP ุณุฑูุฑ ุงุฑุงู ู ุฎุงุฑุฌ ุฑุง ูุฑุงุฑ ุฏูุฏ.

### ๐ป **ุงุณุชูุงุฏู ุฏุฑ ููุฏูุฒ:**
ุดูุง ุฏุฑ ุญุงูุช ุณุฑูุฑ ูุณ ูู ูโุชูุงูุฏ ููู ฺฉุงููฺฏ ุฑุง ุฑู ููุฏูุฒ ุงุฌุฑุง ฺฉูุฏุ ูู ุจุงุฏ:
- ุฑูุชูฺฏ ููุฏูุฒ ุฑุง ุชุบุฑ ุฏูุฏ (ฺฉุงููุฏ ุฏุงุฑุฏ)
- ูพฺฉุชโูุง ุฏุฑุงูุช ุงุฒ IP ูุง ูุฎุชูู ุฑุง capture ฺฉูุฏ

### ๐ง **ูุถุนุช ุชูุณุนู ุฏุฑ ููุฏูุฒ:**

**๐ง ูุถุนุช ูุนู:** ูุนูุงู ุจู ุตูุฑุช ุฏุณุช ุจุฑุง ุชุณุช ุงูุฌุงู ุฏุงุฏูโุงูุ ูู ฺูู ฺฉุฏ ฺฉุงูู ูุณุชุ ุชูุถุญุด ููโุฏูู ุชุง ูุณุฎู ุจุนุฏ ููุชุดุฑ ุดูุฏ.

---

## ๐ **ูุชุฌูโฺฏุฑ**

ุงฺฏุฑ ุชุง ุงูุฌุง ููุฑุงู ฺฉุฑุฏู ุจุงุดุฏุ ูฺฉุฑ ูโฺฉูู ฺฉุงุฑฺฉุฑุฏ ฺฉู ุฑุง ูุชูุฌู ุดุฏูโุงุฏ! ๐

### ๐ **ูุทุงูุนู ุจุดุชุฑ:**
- ุจุฑุง ุงุทูุงุนุงุช ุจุดุชุฑ ุจุงุฏ ุตูุญูโูุง **Examples** ุง **Nodes** ุฑุง ูุทุงูุนู ฺฉูุฏ
- ุจุฑุง ุจุฑูุงููโููุณุงู documentation ูุฑุงุฑ ุฎูุงูุฏ ฺฏุฑูุช ุชุง ุจุชูุงููุฏ ุงุฏูโูุง ุฎูุฏ ุฑุง ุงุถุงูู ฺฉููุฏ

**๐ ูููู ุจุงุดุฏ!**