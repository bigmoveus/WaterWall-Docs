---
sidebar_position: 100600
---

# RawDevice

## ๐ ูุนุฑู ฺฉู

| ูฺฺฏ               | ููุฏุงุฑ                     | ุชูุถุญ                                                                 |
|---------------------|---------------------------|------------------------------------------------------------------------|
| ููุน ููุฏ             | Adapter (ุฏูโุฌูุชู)         | ุชุฑุงูฺฉ ุงุฒ ูุฑ ุฏู ุณูุช ูโุชูุงูุฏ ุงุฑุณุงู ู ุฏุฑุงูุช ุดูุฏุ ุจุณุชู ุจู ุฌุงฺฏุงู ุขู ุฏุฑ ุฒูุฌุฑู |
| ูุงู ุดุจฺฉู           | ูุงู ณ                    | ฺฉุงุฑ ุจุง ุจุณุชูโูุง (Packet) ุจุฏูู ุชุบุฑ ุงูุฏุงุฒู ุขูโูุง                      |
| ูููุนุช ุฏุฑ ุฒูุฌุฑู    | ุงุจุชุฏุง ุฒูุฌุฑู ุง ุงูุชูุง ุฒูุฌุฑู | ููุท ุฏุฑ ุงุจุชุฏุง ุง ุงูุชูุง ุฒูุฌุฑู ูุงุจู ุงุณุชูุงุฏู ุงุณุช                      |
| ูุงุจุณุชฺฏ             | ููุฏ ูุจู/ุจุนุฏ               | ุจุฑุง ุฏุฑุงูุช/ุงุฑุณุงู ุฏุงุฏู ุถุฑูุฑ ุงุณุช                                      |

---


ุงู ููุฏ ุชูุงูุง ุงุณุชุฎุฑุงุฌ (capture) ุง ุชุฒุฑู (inject) ุจุณุชูโูุง ุจู/ุงุฒ ุณุณุชูโุนุงูู ุฑุง ุฏุงุฑุฏ.

ุดูุง ุฏุฑ ุชูุธูุงุช ุงู ููุฏ ุชุนู ูโฺฉูุฏ ุจุณุชูโูุง ูุฑุชุจุท ุจุง ฺฉุฏุงู ุขโูพ ุฑุง ูโุฎูุงูุฏ ุงุณุชุฎุฑุงุฌ ฺฉูุฏุ ุงุฒ ุขู ูุญุธู ุจู ุจุนุฏุ ุชูุงู ุจุณุชูโูุง ฺฉู ุขโูพ ูุจุฏุฃ ุง ููุตุฏุดุงู (ุทุจู ููุชุฑ ุงูุชุฎุงุจ) ุจุฑุงุจุฑ ุจุง ุขโูพโุง ุจุงุดุฏ ฺฉู ูุดุฎุต ฺฉุฑุฏูโุงุฏุ ุงุฒ ุณุณุชูโุนุงูู ุงุณุชุฎุฑุงุฌ ุดุฏู ู ุฎูุฏ ุณุณุชูโุนุงูู ูุชูุฌู ุงู ููุถูุน ููโุดูุฏุ ุนู ุณุณุชูโุนุงูู ุงู ุชุฑุงูฺฉ ุฑุง ุนุงุฏ ุชูู ูโฺฉูุฏ ู ุฏุฑ ูุงู TCP ุจุณุชู Reset ุงุฑุณุงู ููโฺฉูุฏ.

ุจุฑุง ุชุฒุฑู ุจุณุชูโูุง ูุญุฏูุฏุช ูุฌูุฏ ูุฏุงุฑุฏุ ุจุณุชู ุฑุง ุจุง ูุฑ ุขโูพ ูุจุฏุฃ ุง ููุตุฏ ฺฉู ูุงุฑุฏ ฺฉูุฏ ุชุฒุฑู ูโฺฉูุฏ ู ุณุณุชูโุนุงูู ูุฒ ุงุฒ ุงู ููุถูุน ุจโุฎุจุฑ ุงุณุช.

:::caution
ุงู ููุฏ ููุท ุงุฒ IPv4 ูพุดุชุจุงู ูโฺฉูุฏุ ุชูุงู ุจุณุชูโูุง ฺฉู ูุณุฎู IP ุขูโูุง ุบุฑ ุงุฒ ด ุจุงุดุฏ ุฑุฏ ูโุดููุฏ.
:::

:::danger
ุงุฒ ููุช ฺฉู ุงู ููุฏ ุจู ูุงุชุฑูุงู ุงุถุงูู ุดุฏุ ุจุฑุฎ ุขูุชโูุฑูุณโูุง ููฺฉู ุงุณุช ูุงุชุฑูุงู ุฑุง ุจูโุนููุงู ุจุฏุงูุฒุงุฑ ุดูุงุณุง ฺฉููุฏ. ุงุฒ ูุธุฑ ูุง ุงู ููุฑุฏ ูฺฏุฑุงูโฺฉููุฏู ูุณุช ู ูุนูุงู ูุตุฏ ุจุฑุง ุชุบุฑ ุงู ุฑูุชุงุฑ ูุฏุงุฑู.
:::

ุงู ููุฏ ุฏุฑ ููุฏูุฒ ุจู ุฏุณุชุฑุณ Administrator ูุงุฒ ุฏุงุฑุฏ ู ฺฉ Driver ุฏุฑ ฺฉุฑูู ูุฑุงุฑ ูโุฏูุฏ. ุฏุฑ ูููฺฉุณ ุงุฒ RawSocket ุจุฑุง ููุดุชู ู ุงุฒ Netfilter ุจุฑุง ุฏุฑุงูุช ุงุณุชูุงุฏู ูโุดูุฏ.

ุฏุฑ ูููฺฉุณ ููฺูู ูุงุฒ ุจู iptables ูุฌูุฏ ุฏุงุฑุฏุ ูุงุชุฑูุงู ููฺฏุงู ุฎุฑูุฌุ ููุงุนุฏ ุงูุฒูุฏูโุดุฏู ุจู iptables ุฑุง ูพุงฺฉโุณุงุฒ ุฎูุงูุฏ ฺฉุฑุฏ.

ุงู ููุฏ ุชููุง ุฑู ููุฏูุฒ ู ูููฺฉุณ ูุงุจู ุงุณุชูุงุฏู ุงุณุช.

ุงู ููุฏ ฺฉ ุขุฏุงูพุชุฑ ุงุณุชุ ุจู ุฒูุฌุฑูโูุง ูุนูุง ูโุฏูุฏ. ูู ูโุชูุงูุฏ ุดุฑูุนโฺฉููุฏู ุฒูุฌุฑู ุจุงุดุฏ ู ูู ูพุงุงูโุฏููุฏู ุฒูุฌุฑู.

:::note ุฏูุช ฺฉูุฏ
ุงู ููุฏ ูู ูโุชูุงูุฏ ุฏุฑ ุงุจุชุฏุง ุฒูุฌุฑู ูุฑุงุฑ ฺฏุฑุฏ ู ูู ุฏุฑ ุงูุชูุง.

### ุงฺฏุฑ ุฏุฑ ุดุฑูุน ุฒูุฌุฑู ุจุงุดุฏ
ุจุณุชูโูุง ุฏุฑุงูุช ุจู ุณูุช ุฑุงุณุช (upstream) ูุฑุณุชุงุฏู ูโุดููุฏ ู ููฺูู ุจุณุชูโูุง ฺฉู ุงุฒ ุฑุงุณุช ุจู ฺูพ ุฏุฑุงูุช ุดููุฏุ ุจู ุณุณุชูโุนุงูู ุชุฒุฑู ูโุดููุฏ.

```mermaid
flowchart LR;
    OS[ุณุณุชูโุนุงูู] <--> R[RawDevice] -->  Ns1[Node1] -->  Ns2[Node2] --> inv[...]
    style inv fill:transparent,stroke:transparent
    style OS fill:transparent,stroke:transparent
```


### ุงฺฏุฑ ุฏุฑ ูพุงุงู ุฒูุฌุฑู ุจุงุดุฏ
ูโุชูุงูุฏ ุงู ููุฏ ุฑุง ุฏุฑ ูพุงุงู ุฒูุฌุฑู ูุฒ ูุฑุงุฑ ุฏูุฏุ ุฏุฑ ุงู ุญุงูุชุ ุจุณุชูโูุง ฺฉู ุงุฒ ฺูพ ุจู ุฑุงุณุช ูโุขูุฏ ุจู ุณุณุชูโุนุงูู ุชุญูู ูโุดููุฏ ู ุจุณุชูโูุง ฺฉู ุงุฒ ุณุณุชูโุนุงูู ุฏุฑุงูุช ูโุดููุฏุ ุจู ุณูุช ฺูพ ููุดุชู ุฎูุงููุฏ ุดุฏ.

```mermaid
flowchart RL
    OS[ุณุณุชูโุนุงูู] <--> R[RawDevice] -->  Ns1[Node2] -->  Ns2[Node1] --> inv[...]
    style inv fill:transparent,stroke:transparent
    style OS fill:transparent,stroke:transparent
```
:::

ููฺูู ูโุชูุงูุฏ ุงู ููุฏ ุฑุง ูู ุฏุฑ ุดุฑูุน ู ูู ุฏุฑ ูพุงุงู ูุฑุงุฑ ุฏูุฏ ู ฺฉ ุฒูุฌุฑู ฺฉุงูู ุจุณุงุฒุฏุ ููุท ุฏูุช ฺฉูุฏ ฺฉู ูุญุฏูุฏูโูุง ุขโูพ ู ูุงู ุฏุณุชฺฏุงูโูุง ุจุง ูู ุชุฏุงุฎู ูุฏุงุดุชู ุจุงุดูุฏ.

## โ๏ธ ุฑุงูููุง ูพฺฉุฑุจูุฏ

ุงู ููุฏ ุจู ุงู ุดฺฉู ุชูุธู ูโุดูุฏ:

```json
{
  "name": "node_name",
  "type": "RawDevice",
  "settings": {
    "capture-filter-mode": "source-ip",
    "capture-ip": "1.1.1.1",
    "capture-device-name": "cap0",
    "raw-device-name": "raw0"
  },
  "next": "next_node_name"
}
```

ูพุงุฑุงูุชุฑ `capture-filter-mode`


ุงู ูพุงุฑุงูุชุฑ ุงุฎุชุงุฑ ุงุณุช. ุฏู ุญุงูุช ุฏุงุฑุฏ ฺฉู ุญุงูุช ูพุดโูุฑุถ `source-ip` ุงุณุช:

```json
"capture-filter-mode": "source-ip"
```
ุนู ููฺฏุงู ุฏุฑุงูุช ุจุณุชูโูุงุ ุขุฏุฑุณ ูุจุฏุฃ ุจุณุชู ุจุง ููุฏุงุฑ `capture-ip` ููุงุณู ูโุดูุฏุ ุงฺฏุฑ ุจุฑุงุจุฑ ุจูุฏ ุจุณุชู ุงุณุชุฎุฑุงุฌ ูโุดูุฏุ ุฏุฑ ุบุฑ ุงู ุตูุฑุช ฺฉุงุฑ ุงูุฌุงู ููโุดูุฏ.

```json
"capture-filter-mode": "dest-ip"
```
ุนู ููฺฏุงู ุฏุฑุงูุช ุจุณุชูโูุงุ ุขุฏุฑุณ ููุตุฏ ุจุณุชู ุจุง ููุฏุงุฑ `capture-ip` ููุงุณู ูโุดูุฏุ ุงฺฏุฑ ุจุฑุงุจุฑ ุจูุฏ ุจุณุชู ุงุณุชุฎุฑุงุฌ ูโุดูุฏุ ุฏุฑ ุบุฑ ุงู ุตูุฑุช ฺฉุงุฑ ุงูุฌุงู ููโุดูุฏ.

:::note ูฺฉุชู
ุนูููุงู ุงุฒ ุญุงูุช `source-ip` ุงุณุชูุงุฏู ฺฉูุฏุ ุงฺฏุฑ ุงุทูุงุน ฺฉุงู ูุฏุงุฑุฏุ ุจูุชุฑ ุงุณุช ุขู ุฑุง ุชุบุฑ ูุฏูุฏ ุง ุงุตูุงู ุณุช ูฺฉูุฏ ุชุง ููุฏุงุฑ ูพุดโูุฑุถ ุงุนูุงู ุดูุฏ.
:::

ูพุงุฑุงูุชุฑ `capture-ip`


ุงู ูพุงุฑุงูุชุฑ ุงุฌุจุงุฑ ุงุณุช ู ุจุงุฏ ฺฉ ุขโูพ ูุณุฎู ด ูุนุชุจุฑ ูุงุฑุฏ ฺฉูุฏุ ูุซูุงู:

```json
"capture-ip": "1.1.1.1"
```
ุงู ุขโูพ ุจุฑุง ุจุฑุฑุณ ุดุฑุท ุงุณุชุฎุฑุงุฌ ุจุณุชูโูุง ุจูโฺฉุงุฑ ูโุฑูุฏ.

:::caution
ููุฏุงุฑ ุงู ูพุงุฑุงูุชุฑ ุจุงุฏ IPv4 ูุนุชุจุฑ ุจุงุดุฏ ู ูุจุงุฏ ุจุง ุชูุธูุงุช ุฏฺฏุฑ ุดูุง ุชุฏุงุฎู ุงุฌุงุฏ ฺฉูุฏ.
:::

:::caution ูฺฉุชู ููู
ุงู ููุฏ ุฏุฑุจุงุฑู MTU ุชุตููโฺฏุฑ ููโฺฉูุฏุ ูุฑ ุจุณุชูโุง ฺฉู ุงุฒ ฺฉุงุฑุช ุดุจฺฉู ุฏุฑุงูุช ฺฉูุฏุ ุงฺฏุฑ ุงูุฏุงุฒูโุงุด ุงุฒ ููุฏุงุฑ MTU ฺฉู ุฏุฑ `core.json` ุชูุธู ฺฉุฑุฏูโุงุฏ ุจุดุชุฑ ุจุงุดุฏ (ูพุดโูุฑุถ 1500)ุ ุจุณุชู ุฏุฑุงูพ ูโุดูุฏ ู ุงู ููุถูุน ุฏุฑ ูุงฺฏ ฺฏุฒุงุฑุด ุฎูุงูุฏ ุดุฏ.
:::

:::tip ูฺฉุชู
ุฏุฑ ุตูุฑุช ูุฌูุฏ ูุดฺฉู ูุฑุชุจุท ุจุง MTUุ ูุงุชุฑูุงู ุงู ููุถูุน ุฑุง ุจูโุทูุฑ ฺฉุงูู ุฏุฑ ูุงฺฏโูุง ฺฏุฒุงุฑุด ูโฺฉูุฏ ูุฑ ุจุงุฑ ฺฉู ูุฑุงุฑ ุงุณุช ุจุณุชูโุง ููุดุชู ุดูุฏุ ูพุณ ุฎูุงูุฏู ูุงฺฏโูุง ฺฉูฺฉโฺฉููุฏู ุงุณุช.
:::

ุงู ุฏู ูพุงุฑุงูุชุฑ:

```
`capture-device-name`: ""
```

```
`raw-device-name`: ""
```

ุงุฎุชุงุฑ ูุณุชูุฏ ู ุจุฑุง ุงุณุชูุงุฏู ุฏุงุฎู ฺฉุงุฑุจุฑุฏ ุฏุงุฑูุฏุ ุงฺฏุฑ ููุฏุงุฑ ูุฏูุฏ ูุดฺฉู ูพุด ููโุขุฏ ู ูุฑุงุฑ ูุณุช ุจู ุณุณุชูโุนุงูู ุงุนูุงู ุดููุฏ. ุตุฑูุงู ุดุงุฏ ุฏุฑ ูุงฺฏโูุง ูุงุชุฑูุงู ุจูโุฏุฑุฏ ุจุฎูุฑูุฏ.










