---
sidebar_position: 100005
---

# IpManipulator

## ๐ ูุนุฑู ฺฉู

| ูฺฺฏ              | ููุฏุงุฑ                     | ุชูุถุญ                                                                 |
|--------------------|---------------------------|------------------------------------------------------------------------|
| **ููุน ููุฏ**        | Tunnel (ุฏูโุฌูุชู)          | ุชุฑุงูฺฉ ุงุฒ ูุฑ ุฏู ุฌูุช ุนุจูุฑ ูโฺฉูุฏ ู ฺฉุงูฺฉุดู ููููู ูุฏุงุฑุฏ.               |
| **ูุงู ุดุจฺฉู**      | ูุงู ณ                    | ฺฉุงุฑ ุจุง ุจุณุชูโูุง (Packet) ุจุฏูู ุชุบุฑ ุงูุฏุงุฒูโ ุขูโูุง                     |
| **ูููุนุช ุฏุฑ ุฒูุฌุฑ**| ูุณุท ุฒูุฌุฑ                 | ููุท ุฏุฑ ูุณุท ุฒูุฌุฑ ูุงุจู ุงุณุชูุงุฏู ุงุณุช                                     |
| **ูุงุจุณุชฺฏ**        | ููุฏ ูุจู ู ุจุนุฏ             | ุจุฑุง ุฏุฑุงูุช/ุงุฑุณุงู ุฏุงุฏู ุถุฑูุฑ ุงุณุช                                      |

---

ุงู ููุฏ ฺฉ ุงุฒ ุงุตูโุชุฑู ููุฏูุง ูุงู ณ ูุงุชุฑูุงู ุงุณุชุ ูุนูููุงู ุชุฑููุฏูุง ฺฉู ูโุฎูุงูู ุฑู ูพฺฉุชโูุง ุจุฑุง ุนุจูุฑ ุงุฒ ููุชุฑูฺฏ ุงุนูุงู ฺฉูู ุฑุง ุฏุฑ ุงู ููุฏ ูพุงุฏูโุณุงุฒ ูโฺฉูู.

ุฏุฑ ูุณุฎูู ฺฉููู ูุงุชุฑูุงูุ ุงู ููุฏ ุงุฒ ณ ุชุฑููุฏ ูพุดุชุจุงู ูโฺฉูุฏ ฺฉู ุฏุฑ ุงุฏุงูู ุจู ูุฑ ฺฉุฏุงู ูโูพุฑุฏุงุฒู.

## ุนููฺฉุฑุฏ

ุณุงุฎุชุงุฑ ฺฉู ุงุณุชูุงุฏู ุงุฒ ุงู ููุฏ:

```json
{
  "name": "node_name",
  "type": "IpManipulator",
  "settings": {
     // per trick settings
  },
  "next": "next_node_name"
}
```

## ุชุฑููุฏ ุดูุงุฑู ฑ: ุชุบุฑ IP Payload Identifier

ูุฑ ูพฺฉุช ูุงูู IP (ฺู ูุณุฎู ด ู ฺู ูุณุฎู ถ) ฺฉ payload ุญูู ูโฺฉูุฏ ฺฉู ููุน ุขู ุจุง ฺฉ ุนุฏุฏ ุจู ูุงู identifier ูุดุฎุต ูโุดูุฏ.

ุงู ุนุฏุฏ ูุดุฎุต ูโฺฉูุฏ ฺฉู ูพฺฉุชุ ุฏุงุฏูู TCPุ UDPุ ICMPุ IGMP ู ... ุฑุง ุญูู ูโฺฉูุฏ.

ูุณุช ฺฉุงูู ุงู ุงุนุฏุงุฏ ุฏุฑ ููฺฉ ุฒุฑ ููุฌูุฏ ุงุณุช:

### ๐ ูพุฑูุชฺฉูโูุง IP
- [List of IP protocol numbers](https://en.wikipedia.org/wiki/List_of_IP_protocol_numbers)

ุฏุฑ ุงู ุชุฑููุฏุ ูพฺฉุชโูุง ฺฉู ุงุฒ ุณูุช ฺูพ ุจู ุฑุงุณุช ุนุจูุฑ ูโฺฉููุฏ ุจุฑุฑุณ ูโุดููุฏุ ุงฺฏุฑ ูพฺฉุช ุงุฒ ููุน TCP ุจูุฏ (identifier = 6)ุ ููุฏุงุฑ ุขู ุฑุง ุจู ฺฉ ุนุฏุฏ ุฏฺฏุฑ ุชุบุฑ ูโุฏูู.

ุงู ฺฉุงุฑ ุฒูุงู ููุฏ ุงุณุช ฺฉู ูุงุฑูุงู ุจู ุณุฑูุฑ ุงุฑุงู ู ุฎุงุฑุฌ ุฏุฑ ูพุฑุฏุงุฒุด ุงููุงุน ุฏฺฏุฑ ูพุฑูุชฺฉูโูุง ููุทูโุถุนู ุฏุงุดุชู ุจุงุดุฏ ุง ุขููุง ุฑุง ูุงุฏุฏู ุจฺฏุฑุฏุ ุฏุฑ ูุชุฌู ูโุชูุงู ุงุฒ ุงู ุฑูุชุงุฑ ุจูุฑู ุจุฑุฏ.

ุจุฑุง ุงู ฺฉุงุฑุ ุงู ุชูุธู ุฑุง ุณุช ฺฉูุฏ:

```json
{
  "protoswap-tcp": <number>
}
```

ุงู ููุฏ ููฺฏุงู ุจุฑฺฏุดุช ูพฺฉุช (ูุณุฑ ุฑุงุณุช ุจู ฺูพ) ุนูู ูุนฺฉูุณ ุฑุง ุงูุฌุงู ูโุฏูุฏุ ุนู ุงฺฏุฑ identifier ุจุง ุขู ุนุฏุฏ ุจุฑุงุจุฑ ุจูุฏุ ุขู ุฑุง ุจู ุดูุงุฑูู ถ (TCP) ุจุฑูโฺฏุฑุฏุงูุฏ.

ุงู ุฑูุด ุชููู ุฏุฑ ุนูู ุฎูุจ ุจูุฏู ู ูู ุจุด ุงุฒ ฒ ูุงู ุงุฒ ุขู ุงุณุชูุงุฏู ฺฉุฑุฏูโุงู ู ูุดฺฉู ูุฎูุฑุฏูโุงู (ุงฺฏุฑฺู ุชูุณุท ุจุฑุฎ ุฏูุณุชุงู ูุดฺฉูุงุช ูุงููุฏ ููุชุฑ ุดุฏู ุง ยซIranAccessยป ฺฏุฒุงุฑุด ุดุฏู ุงุณุช).

ุจู ูุธุฑ ูโุฑุณุฏ ุงู ููุงุฑุฏ ูโุชูุงูุฏ ุจู ุนูุงูู ุฏฺฏุฑ ูู ูุฑุชุจุท ุจุงุดุฏ ู ููโุชูุงู ููุดู ูุดฺฉู ุฑุง ุจู ุชููู ูุณุจุช ุฏุงุฏุ ฺูู ุงฺฏุฑ ุงู ุฑูุด ูุฑุงุฑ ุจูุฏ ุจู ุทูุฑ ฺฉุงูู ููุชุฑ ุดูุฏุ ุจุฑุง ููู ุจูโุตูุฑุช ฺฉุณุงู ุงุชูุงู ูโุงูุชุงุฏุ ูู ุจุฑุง ุชุนุฏุงุฏ ูุญุฏูุฏ ฺฉุงุฑุจุฑ ุฎุงุต.

ููฺูู ุฏูุช ฺฉูุฏ ุนุฏุฏ ฺฉู ุงูุชุฎุงุจ ูโฺฉูุฏ ุฏุฑ ุงุญุชูุงู ููุชุฑ ุดุฏู ูุคุซุฑ ุงุณุช. ุดุฎุตุงู ุฏุฏูโุงู ุจุฑุฎ ุงุนุฏุงุฏ ุจโูุนูุง ุจุงุนุซ ูโุดููุฏ ุจู ฑ ุชุง ณ ุฑูุฒ IP ุณุฑูุฑ ุฎุงุฑุฌ ููุชุฑ ุดูุฏุ ุงูุง ุจุฑุฎ ุงุนุฏุงุฏ ููุทู ุชุง ุงู ูุญุธู ุจุฑุง ูู ุจุฏูู ูุดฺฉู (ููุชุฑ ุง ุงฺฉุณุณ) ุจูุฏูโุงูุฏ.

ุงฺฏุฑ ุจุฎูุงูุฏ ุฑูุด ูุซู WireGuard (ฺฉู UDP ุงุณุช) ุฑุง ุชููู ฺฉูุฏ ู ุงุฒ ุงู ูุฒุช ุงุณุชูุงุฏู ฺฉูุฏุ ฺฉุงู ุงุณุช ุชูุธู ุฒุฑ ุฑุง ุงุถุงูู ฺฉูุฏ:

```json
{
  "protoswap-udp": <number>
}
```

ูโุชูุงูุฏ ูุฑ ุฏู ุชูุธู ุฑุง ููุฒูุงู ุฏุงุดุชู ุจุงุดุฏ ู ูู TCP ู ูู UDP ุฑุง ุชุบุฑ ุฏูุฏุ ุงูุง ุฏูุช ฺฉูุฏ:

- protoswap-udp
- protoswap-tcp

ูุจุงุฏ ุจุง ูู ฺฉุณุงู ุจุงุดูุฏ! โ๏ธ

ููฺูู ุฏุฑ ุณูุช ุณุฑูุฑ ุฎุงุฑุฌ ุจุงุฏ ููู ููุฏ ุจุง ููู ุชูุธูุงุช ูุนุงู ุจุงุดุฏ ุชุง ุขูุฌุง ูพฺฉุชโูุง ุจู ุดฺฉู ุตุญุญ ุจุฑฺฏุฑุฏุงูุฏู ุดููุฏ.

---

## ุชุฑููุฏ ุดูุงุฑู ฒ: ุจุงุฒ ุจุง ุจุชโูุง ูพุฑูุชฺฉู TCP

ูโุชูุงูุฏ ุจุง ุชุบุฑ ุจุชโูุง TCP ูุงุฑูุงู ุฑุง ุฏุฑ ูพุฑุฏุงุฒุด ูพฺฉุชโูุง ฺฏุฌ ฺฉูุฏ.

ุจุฑุง ุงู ฺฉุงุฑ ุจู ุชูุธูุงุช ุฒุฑ ุฏุณุชุฑุณ ุฏุงุฑุฏ. ุจูโุนููุงู ูุซุงู:

```json
"up-tcp-bit-ack": "packet->fin",
"up-tcp-bit-fin": "packet->ack",

"dw-tcp-bit-fin": "packet->ack",
"dw-tcp-bit-ack": "packet->fin"
```

**๐ ุชูุถุญุงุช:**

ุจู ุงุจุชุฏุง ุชูุธูุงุช ุฏูุช ฺฉูุฏ:

- **up:** ุชูุธูุงุช ูพฺฉุชโูุง ฺฉู ุงุฒ ุณูุช ฺูพ ุจู ุฑุงุณุช ุงู ููุฏ ุญุฑฺฉุช ูโฺฉููุฏ
- **dw:** ุชูุธูุงุช ูพฺฉุชโูุง ฺฉู ุงุฒ ุณูุช ุฑุงุณุช ุจู ฺูพ ุงู ููุฏ ุญุฑฺฉุช ูโฺฉููุฏ

**โก ูฺฉุชูู ููู:** ุงุนูุงู ุชุบุฑ ุจุชโูุง ุจูโุตูุฑุช ููุฒูุงู ุงูุฌุงู ูโุดูุฏ ู ุฎุทโุจูโุฎุท ูุณุช.

**๐ ูุซุงู:**
- "up-tcp-bit-ack": "packet->fin" ุนู ุจุช ack ููุฏุงุฑุด ุงุฒ ุจุช fin ูพฺฉุช ุงุตู ุฎูุงูุฏู ุดูุฏ.
- ูพฺฉุช ุงุตู ุชุง ูพุงุงู ุนููุงุช ุชุบุฑ ููโฺฉูุฏุ ุจูุงุจุฑุงู ุฏุฑ ุฎุท ุจุนุฏ ูโุชูุงูู ุงุฒ ููุฏุงุฑ ack ูพฺฉุช ุงุตู ุจุฑุง ุณุงุฎุชู ุจุช fin ูพฺฉุช ุฌุฏุฏ ุงุณุชูุงุฏู ฺฉูู.

ุฏุฑ ุณูุช ุณุฑูุฑ ุฎุงุฑุฌ ุจุงุฏ ุจุชโูุง ุฑุง ุจู ุญุงูุช ุงูู ุจุฑฺฏุฑุฏุงูุฏ ู ุณูพุณ ูพฺฉุช ุฑุง ุจู ุณุณุชูโุนุงูู ุชุญูู ุฏูุฏ. ุฏุฑ ูุซุงู ูุง ุงู ุชูุธูุงุช ูุงุฒู ุงุณุช:

```json
"up-tcp-bit-ack": "packet->fin",
"up-tcp-bit-fin": "packet->ack",

"dw-tcp-bit-fin": "packet->ack",
"dw-tcp-bit-ack": "packet->fin"
```

**ุชูุถุญุงุช ุชฺฉูู:**

ูโุชูุงูุฏ ุชูุงู ุจุชโูุง ุฑุง ุชุบุฑ ุฏูุฏุ ุชูุธูุงุช ุฏุฑ ุงุฎุชุงุฑ ุดูุงุณุช:
```json

"up-tcp-bit-cwr": <string>,
"up-tcp-bit-ece": <string>,
"up-tcp-bit-urg": <string>,
"up-tcp-bit-ack": <string>,
"up-tcp-bit-psh": <string>,
"up-tcp-bit-rst": <string>,
"up-tcp-bit-syn": <string>,
"up-tcp-bit-fin": <string>,

"dw-tcp-bit-cwr": <string>,
"dw-tcp-bit-ece": <string>,
"dw-tcp-bit-urg": <string>,
"dw-tcp-bit-ack": <string>,
"dw-tcp-bit-psh": <string>,
"dw-tcp-bit-rst": <string>,
"dw-tcp-bit-syn": <string>,
"dw-tcp-bit-fin": <string>
```

ู ูุฑ ฺฉุฏุงู ุฑุง ูโุชูุงูุฏ ุจู ุงู ุดฺฉูโูุง ุณุช ฺฉูุฏ:

```
"off", "on", "packet->cwr", "packet->ece", "packet->urg", "packet->ack", "packet->psh", "packet->rst", "packet->syn", "packet->fin"
```

---

## ๐งฉ ุชุฑููุฏ ุชฺฉูโุชฺฉู ฺฉุฑุฏู ูพฺฉุชโูุง (SNI Blender)

ุจุง ููู ููุฏ IpManipulator ูโุชูุงูุฏ ูพฺฉุชโูุง TlsClientHello ุฑุง ุจู ูพฺฉุชโูุง ูุงูู IP ุชฺฉูโุชฺฉู ฺฉูุฏ.

### ๐ฏ ฺฉุงุฑุจุฑุฏูุง
- ๐ ุจุฑุง ุชููู ุฒุฏูุ ุฏุงููู ุฑุง ูุฎู ฺฉูุฏ
- โ๏ธ ุชููู ุจู Cloudflare
- ๐ ุฏุฑ ุญุงูุช ยซุณุฑูุฑูุณยปุ ุณุงุชโูุง ูพุดุช CDN ูุซู ูุชูุจ ุฑุง ุจุงุฒ ฺฉูุฏ

### ๐ ุชูุงูุช ุจุง ุฑูุดโูุง ุฏฺฏุฑ
ุงู ุฑูุด ุจุง fragmenting ูุนุฑูโุดุฏู ุชูุณุท gfw-knocker ูุชูุงูุช ุงุณุช.

### โ๏ธ ูุญููู ฺฉุงุฑ
1) ูพฺฉุช ClientHello ุจู ูพฺฉุชโูุง ูุงูู IP ุชฺฉูโุชฺฉู ูโุดูุฏ
2) ุณูพุณ ุจุง ุชุฑุชุจ ุชุตุงุฏู ุงุฑุณุงู ูโุดูุฏ
3) ุชุนุฏุงุฏ ูพฺฉุชโูุง ุฏุฑ ุชูุธูุงุช ูุงุจู ุชุบุฑ ุงุณุช (ุนุฏุฏ ด ูุนูููุงู ููุงุณุจ ุงุณุช)

### ๐ ูุชุงุฌ ุชุณุช
- โ ููุฑุงู ุงูู: ุฏุฑ ุจุฑุฎ ูุงุฑูุงูโูุง ุงู ููุน ูพฺฉุช ฺฉูุงู drop ูโุดูุฏ
- โ ุงุฑุงูุณู: ุจุงุนุซ ุจุงุฒ ุดุฏู ุณุงุชโูุง ููุชุฑ ูพุดุช CDN ุดุฏ (ูุชูุจ ู ...)
- ๐ฅ๏ธ ุชุณุช ุฑู ููุฏูุฒ: ฺูู ูุงุฒ ุจู ุณุฑูุฑ ูุฏุงุดุช

โ๏ธ ูุดุฏุงุฑ: ุฑู ูููู ุดุจฺฉูโูุง ุฌูุงุจ ููโุฏูุฏุ ุงูุง ุฑูุด ุฌุฏุฏ ู ูุงุจู ุจุฑุฑุณ ุงุณุช.

### ๐๏ธ ูพุงุฏูโุณุงุฒ

ุจุฑุง ุงู ุชุฑููุฏุ ุฏุฑ ุณุฑูุฑ ุฎุงุฑุฌ ูุงุชุฑูุงู ฺฉุงุฑ ุงูุฌุงู ููโุฏูุฏ. ุฏุฑ ุณุฑูุฑ ุงุฑุงูุ ฺฉุงููฺฏ ุดูุง ุจูโุตูุฑุช ุนุงุฏ ุจู ูพูุฑุช ดดณ ุณุฑูุฑ ุฎุงุฑุฌ ูุตู ูโุดูุฏ.

โ๏ธ ูุงุฒ: ฺฉุงููฺฏ ฺฉู ุฏุณุช ฺฉุงุฑุจุฑ ุงุณุช ุจุงุฏ TLS ุฏุงุดุชู ุจุงุดุฏ. ุงฺฏุฑ ูุฏุงุฑุฏุ ุจุงุฏ ุฏุฑ ูุงุชุฑูุงู ุจู ุฒูุฌุฑ ููุฏูุง TlsClient/TlsServer ุฑุง ุงุถุงูู ฺฉูุฏ.

ุฏุฑ ฺฉู ุณุฑูุฑ ุงุฑุงู ุจุงุฏ ุจู ุณุฑูุฑ ุฎุงุฑุฌ ุงุชุตุงู TLS ุจุฑูุฑุงุฑ ฺฉูุฏ ุชุง ุงู ุชุฑููุฏ ุจุชูุงูุฏ ุฏุงููู ุฑุง ุชุดุฎุต ุฏูุฏ ู ุขู ุฑุง ุชฺฉูโุชฺฉู ฺฉูุฏ.

ุงฺฏุฑ ุฏุฑ ุฎูุฏ Xrayุ TLS ูุนุงู ุจุงุดุฏ (ุนู ฺฉุงููฺฏ ฺฉุงุฑุจุฑ ูู TLS ุงุณุช) ูุงุฒ ูุณุช ูุงุชุฑูุงู ุฏุฑ ุณุฑูุฑ ุฎุงุฑุฌ ุงุฌุฑุง ุดูุฏ.

ุฏุฑ ุบุฑ ุงู ุตูุฑุช ุจุงุฏ ุจุง ูุงุชุฑูุงู ฺฉ TLS tunnel ุจุณุงุฒุฏ ฺฉู ุฏุฑ ุงู ุญุงูุชุ ุฏุฑ ุณุฑูุฑ ุฎุงุฑุฌ ูุฒ ุจุฑุง ููุฏ TlsServer ูุงุฒู ุงุณุช ูุงุชุฑูุงู ุงุฌุฑุง ุดูุฏ.

ุงฺฏุฑ ูุตุฏ ุชููู ุจู Cloudflare ุฑุง ุฏุงุฑุฏุ ูุงุชุฑูุงู ููุท ุฑู ุณุฑูุฑ ุงุฑุงู ฺฉุงู ุงุณุช ุงุฌุฑุง ุดูุฏ.

ุงูุฏูุงุฑู ุชูุถุญุงุช ุงู ุจุฎุด ูุงุถุญ ุจูุฏู ุจุงุดุฏุ ุฏุฑฺฉ ฺฉุงูู ุขู ูุงุฒููุฏ ุขุดูุง ุจุดุชุฑ ุจุง ุดุจฺฉู ู TLS ุงุณุช.

ูโุชูุงูุฏ ููฺฉ ุงู ุขููุฒุด ุฑุง ุจู ฺฉ ูุฏู ููุด ูุตููุน ุจุฏูุฏ ุชุง ุฏุฑุจุงุฑูู ุจุฎุดโูุง ูุฎุชูู ุขู ุณุคุงู ฺฉูุฏ ู ุฌุฒุฆุงุช ุจุดุชุฑ ุจฺฏุฑุฏ.

ุจุฑุง ูุนุงูโุณุงุฒ ุงู ูุงุจูุชุ ุงู ููุงุฏุฑ ุฑุง ุชูุธู ฺฉูุฏ:

```json
"sni-blender": true,
"sni-blender-packets": 4
```

๐ ูฺฉุชู: ุฏุฑ ุงูุฌุง ุชููุง ฺฉุงู ุงุณุช IP ุณุฑูุฑ ุงุฑุงู ู ุฎุงุฑุฌ ุฑุง ุชูุธู ฺฉูุฏ.

### ๐ป ุงุณุชูุงุฏู ุฏุฑ ููุฏูุฒ
ุฏุฑ ุญุงูุช ุณุฑูุฑูุณ ูุฒ ูโุชูุงูุฏ ููู ฺฉุงููฺฏ ุฑุง ุฑู ููุฏูุฒ ุงุฌุฑุง ฺฉูุฏุ ุงูุง ุจุงุฏ:
- ุฑูุชูฺฏ ููุฏูุฒ ุฑุง ุชุบุฑ ุฏูุฏ (ุฏุณุชูุฑ ุฏุงุฑุฏ)
- ูพฺฉุชโูุง ุฏุฑุงูุช ุงุฒ IPูุง ูุฎุชูู ุฑุง capture ฺฉูุฏ

### ๐ง ูุถุนุช ุชูุณุนู ุฏุฑ ููุฏูุฒ

๐ง ูุถุนุช ูุนู: ูุนูุงู ุจูโุตูุฑุช ุฏุณุช ุจุฑุง ุชุณุช ุงูุฌุงู ุดุฏู ุงุณุช. ฺูู ฺฉุฏ ฺฉุงูู ูุณุชุ ุชูุถุญ ุขู ุฑุง ุจู ูุณุฎูู ุจุนุฏ ููฺฉูู ูโฺฉูู.










