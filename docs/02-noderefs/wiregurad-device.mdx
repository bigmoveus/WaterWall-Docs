---
sidebar_position: 100800
---

# WireGuardDevice

## ๐ ูุนุฑู ฺฉู

| ูฺฺฏ              | ููุฏุงุฑ                        | ุชูุถุญ                                              |
|--------------------|------------------------------|----------------------------------------------------|
| ููุน ููุฏ            | tunnel (ุชฺฉ ุฌูุชู)             | ุงุฒ ุณูุช ฺูพ ุจุง tun device ฺฉุงุฑ ู ฺฉูุฏ ู ุงุณ                                 |
| ูุงู ุดุจฺฉู          | ูุงู ณ ู ด                    | ฺฉุงุฑ ุจุง ุจุณุชูโูุง UDP ุจูโุตูุฑุช stateless (ุจุฏูู ุงุชุตุงู) |
| ูููุนุช ุฏุฑ ุฒูุฌุฑู    | ุงุจุชุฏุง ุง ุงูุชูุง ุฒูุฌุฑู        | ููุท ุฏุฑ ุงุจุชุฏุง ุง ุงูุชูุง ุฒูุฌุฑู ูุงุจู ุงุณุชูุงุฏู ุงุณุช    |
| ูุงุจุณุชฺฏ            | ููุฏ ูุจู/ุจุนุฏ                  | ุจุฑุง ุฏุฑุงูุช/ุงุฑุณุงู ุฏุงุฏู ุถุฑูุฑ ุงุณุช                  |


## ุนููฺฉุฑุฏ

ุงู ููุฏ ูพุงุฏูโุณุงุฒ ฺฉุงูู ุงุฒ ูพุฑูุชฺฉู WireGuard ุงุณุช ฺฉู ุจู ุตูุฑุช ุฏูุทุฑูู ฺฉุงุฑ ูโฺฉูุฏ.

### ุฌูุช ุงุฑุณุงู (ฺูพ ุจู ุฑุงุณุช)
- ุงุฒ ุณูุช ฺูพุ ูพฺฉุชโูุง ูุงู ณ ุฑุง ุงุฒ TUN device ุฏุฑุงูุช ูโฺฉูุฏ
- ุงู ูพฺฉุชโูุง ุฑุง ุฑูุฒูฺฏุงุฑ ฺฉุฑุฏู ู ุฏุฑ ูุงูุจ UDP ุจู ุณูุช ุฑุงุณุช ุงุฑุณุงู ูโฺฉูุฏ
- ูุนูููุงู ุงุฒ ููุฏ `UdpStatelessSocket` ุจุฑุง ุงุฑุณุงู ุงุณุชูุงุฏู ูโุดูุฏ

### ุฌูุช ุฏุฑุงูุช (ุฑุงุณุช ุจู ฺูพ)  
- ูพฺฉุชโูุง UDP ุฑูุฒูฺฏุงุฑ ุดุฏู ุฑุง ุงุฒ peer ุฎูุฏ ุฏุฑุงูุช ูโฺฉูุฏ
- ุขูโูุง ุฑุง ุฑูุฒฺฏุดุง ฺฉุฑุฏู ู ุจู ุตูุฑุช ูพฺฉุชโูุง ูุงู ณ ุจู ุณูุช ฺูพ ุงุฑุณุงู ูโฺฉูุฏ

### ุณุงุฎุชุงุฑ ุนููู
WireGuard ุณุงุฎุชุงุฑ ูุดุฎุต ุฏุงุฑุฏ ฺฉู ูุณุชูู ุงุฒ ฺฉูุงูุช ุง ุณุฑูุฑ ุจูุฏู ุงุณุช:


```mermaid
flowchart LR;
    TunDevice --> PacketAsData --> WireGuardDevice --> UdpStateLessSocket
```

ุนู ุญุช ุงฺฏุฑ ุชููู ุฑุงูโุงูุฏุงุฒ ฺฉูุฏุ ูุงูโูุง JSON ุฏุฑ ุณุฑูุฑ ุงุฑุงู ู ุฎุงุฑุฌ ฺฉุณุงู ุฎูุงููุฏ ุจูุฏ.

## ุงุณุชูุงุฏู ุงุฒ Bridge ุจุฑุง ูพุฑุฏุงุฒุด ุงุถุงู

ุงฺฏุฑ ููุฏ ูุงู ณ ุชฺฉโุฌูุชูโุง (ฺูพ ุจู ุฑุงุณุช) ุฏุงุฑุฏ ู ูโุฎูุงูุฏ ูุจู ุงุฒ ุงุฑุณุงู ุง ุฏุฑุงูุช ุฏุงุฏูโูุง UDPุ ูพุฑุฏุงุฒุด ุงุถุงู ุฑู ูพฺฉุช ุงูุฌุงู ุฏูุฏุ ูโุชูุงูุฏ ุงุฒ ููุฏ `Bridge` ุงุณุชูุงุฏู ฺฉูุฏ:


```mermaid
flowchart LR;
    TunDevice --> PacketAsData --> WireGuardDevice --> B1[Bridge]
    
    UdpStateLessSocket --> MyDesiredNode --> B2[Bridge]
```

ุฏุฑ ุงู ูุซุงูุ `UdpStatelessSocket` ูพฺฉุชโูุง ุฏุฑุงูุช ุฑุง ุจู ุณูุช ุฑุงุณุช ูโูุฑุณุชุฏ ุชุง `MyDesiredNode` ุนููุงุช ููุฑุฏ ูุธุฑ ุฑุง ุฑู ุฏุงุฏูโูุง ุฏุฑุงูุช ุดุฏู ุงูุฌุงู ุฏูุฏ.

## ูุซุงู ฺฉุงูู: WireGuard ุจุง ุฑูุฒูฺฏุงุฑ ุงุถุงู

ูุฑุถ ฺฉูู ูโุฎูุงูู ุจู ุณุฑูุฑ ุงุฑุงู ู ุฎุงุฑุฌุ ฺฉุงูฺฉุดู WireGuard ุจุฑูุฑุงุฑ ฺฉูู ู ุนูุงูู ุจุฑ ุฑูุฒูฺฏุงุฑ ุฏุงุฎู WireGuardุ ฺฉ ูุงู ุฑูุฒูฺฏุงุฑ ุงุถุงู ูุฒ ุฏุงุดุชู ุจุงุดู.

ุจุฑุง ุงู ฺฉุงุฑุ ุฏู ููุฏ ูุฑุถ ุฒุฑ ุฑุง ุฏุฑ ูุธุฑ ูโฺฏุฑู:

- `ProtectorClient` โ ุฑูุฒูฺฏุงุฑ ุฏุงุฏูโูุง
- `ProtectorServer` โ ุฑูุฒฺฏุดุง ุฏุงุฏูโูุง

ุงู ููุฏูุง ูุฒ ฺูพ ุจู ุฑุงุณุช ฺฉุงุฑ ูโฺฉููุฏ.

### ูพฺฉุฑุจูุฏ ุณุฑูุฑ ุงุฑุงู:

```mermaid
flowchart LR;
    TunDevice --> PacketAsData --> WireGuardDevice --> ProtectorClient --> B1[Bridge]
    
    UdpStateLessSocket --> B2[Bridge]
```

### ูพฺฉุฑุจูุฏ ุณุฑูุฑ ุฎุงุฑุฌ:

```mermaid
flowchart LR;
    TunDevice --> PacketAsData --> WireGuardDevice --> B1[Bridge]
    
    UdpStateLessSocket --> ProtectorServer --> B2[Bridge]
```

ุจุง ุงู ูุซุงูุ ููููู ุงุณุชูุงุฏู ุงุฒ `Bridge` ุจุง WireGuard ุฑูุดู ุดุฏู ุงุณุช. ุญุชูุงู ุตูุญู ูุณุชูุฏุงุช `Bridge` ุฑุง ูุฒ ูุทุงูุนู ฺฉูุฏ.

## โ๏ธ ุฑุงูููุง ูพฺฉุฑุจูุฏ

### ุณุงุฎุชุงุฑ JSON

```json
{
  "name": "node_name",
  "type": "WireGuardDevice",
  "settings": {
    "privatekey": "your_private_key_here",
    "peers": {
      "peer1": {
        "publickey": "peer_public_key_here",
        "presharedkey": "optional_preshared_key",
        "endpoint": "1.2.3.4:51820",
        "allowedips": "10.0.0.2/32, fd86:ea04:1115::2/128",
        "persistentkeepalive": 25
      }
    }
  },
  "next": "next_node_name"
}
```

### ุดุฑุญ ูพุงุฑุงูุชุฑูุง ุชูุธูุงุช

#### ูพุงุฑุงูุชุฑูุง ุงุตู

| ูพุงุฑุงูุชุฑ | ููุน | ุงูุฒุงู | ุชูุถุญ |
|---------|-----|--------|-------|
| `name` | string | โ | ูุงู ฺฉุชุง ููุฏ ุฏุฑ ูพฺฉุฑุจูุฏ |
| `type` | string | โ | ููุน ููุฏ ฺฉู ุจุงุฏ `WireGuardDevice` ุจุงุดุฏ |
| `next` | string | โ | ูุงู ููุฏ ุจุนุฏ ุฏุฑ ุฒูุฌุฑู |

#### ุชูุธูุงุช WireGuard (`settings`)

| ูพุงุฑุงูุชุฑ | ููุน | ุงูุฒุงู | ุชูุถุญ |
|---------|-----|--------|-------|
| `privatekey` | string | โ | ฺฉูุฏ ุฎุตูุต ุงู ุฏุณุชฺฏุงู WireGuard (base64) |
| `peers` | object | โ | ูุณุช ููุชุงุงู (peers) ฺฉู ุจุง ุขูโูุง ุงุฑุชุจุงุท ุจุฑูุฑุงุฑ ูโุดูุฏ |

#### ุชูุธูุงุช ูุฑ Peer

| ูพุงุฑุงูุชุฑ | ููุน | ุงูุฒุงู | ุชูุถุญ |
|---------|-----|--------|-------|
| `publickey` | string | โ | ฺฉูุฏ ุนููู peer ููุตุฏ (base64) |
| `endpoint` | string | โ | ุขุฏุฑุณ IP ู ูพูุฑุช peer (`IP:PORT`) |
| `allowedips` | string | โ | ูุญุฏูุฏู IP ูุง ฺฉู ุงุฒ ุทุฑู ุงู peer ุฑุฏ ูโุดููุฏ |
| `presharedkey` | string | โ | ฺฉูุฏ ูุดุชุฑฺฉ ุงุถุงู ุจุฑุง ุงููุช ุจุดุชุฑ (base64) |
| `persistentkeepalive` | number | โ | ูุงุตูู ุฒูุงู ุงุฑุณุงู ูพฺฉุช keep-alive (ุซุงูู) |

### ุชูุถุญุงุช ุชฺฉูู

#### `privatekey`
- **ููุน**: ุฑุดุชู base64
- **ุงูุฒุงู**: ุจูู
- **ุชูุถุญ**: ฺฉูุฏ ุฎุตูุต 32 ุจุงุช ฺฉู ููุญุตุฑ ุจู ุงู ุฏุณุชฺฏุงู ุงุณุช
- **ูุซุงู**: ูโุชูุงูุฏ ุจุง ุฏุณุชูุฑ `wg genkey` ุชููุฏ ฺฉูุฏ

#### `publickey`
- **ููุน**: ุฑุดุชู base64  
- **ุงูุฒุงู**: ุจูู (ุจุฑุง ูุฑ peer)
- **ุชูุถุญ**: ฺฉูุฏ ุนููู peer ฺฉู ุจุง ฺฉูุฏ ุฎุตูุต ุขู ูุชูุงุธุฑ ุงุณุช
- **ูุซุงู**: ุงุฒ ฺฉูุฏ ุฎุตูุต peer ุจุง `wg pubkey` ูุงุจู ุชููุฏ

#### `endpoint`
- **ููุน**: ุฑุดุชู
- **ุงูุฒุงู**: ุฎุฑ
- **ุชูุถุญ**: ุขุฏุฑุณ ู ูพูุฑุช peer ุจุฑุง ุจุฑูุฑุงุฑ ุงุชุตุงู ุงููู
- **ูฺฉุชู**: ุงฺฏุฑ ุชุนุฑู ูุดูุฏุ ููุท ุงุชุตุงูุงุช ูุฑูุฏ ูพุฐุฑูุชู ูโุดูุฏ
- **ูุฑูุช**: `IP:PORT` ุง `domain.com:PORT`

:::caution
ุงฺฏู endpoint ูุฑุงุฑ ูุฏูุฏ ุ ุงู ููุฏ ููุฏุดฺฉ ุฑุง ุดุฑูุน ููฺฉูู ูู peer ูุชููู ุจู ูุง ููุฏุดฺฉ ฺฉูู ู ฺฉุงูฺฉุดู ุฑุง ุจุฑูุฑุงุฑ ฺฉูู.
:::

#### `allowedips`
- **ููุน**: ุฑุดุชู
- **ุงูุฒุงู**: ุจูู
- **ุชูุถุญ**: ูุญุฏูุฏูโูุง IP ฺฉู ุงุฒ ุทุฑู ุงู peer ูุณุฑุงุจ ูโุดููุฏ
- **ูุฑูุช**: ูโุชูุงูุฏ ฺูุฏู ูุญุฏูุฏู ุจุง ฺฉุงูุง ุฌุฏุง ุดุฏู ุจุงุดุฏ
- **ูุซุงู**: `0.0.0.0/0` ุจุฑุง ุชูุงู ุชุฑุงูฺฉ IPv4

#### `presharedkey`
- **ููุน**: ุฑุดุชู base64
- **ุงูุฒุงู**: ุฎุฑ
- **ุชูุถุญ**: ฺฉูุฏ 32 ุจุงุช ุงุถุงู ุจุฑุง ุงููุช post-quantum
- **ูฺฉุชู**: ูุฑ ุฏู ุทุฑู ุจุงุฏ ููู ฺฉูุฏ ุฑุง ุฏุงุดุชู ุจุงุดูุฏ

#### `persistentkeepalive`
- **ููุน**: ุนุฏุฏ ุตุญุญ
- **ุงูุฒุงู**: ุฎุฑ
- **ุชูุถุญ**: ูุงุตูู ุฒูุงู ุงุฑุณุงู ูพฺฉุชโูุง ูฺฏูโุฏุงุฑูุฏู ุงุชุตุงู (ุซุงูู)
- **ฺฉุงุฑุจุฑุฏ**: ุจุฑุง ุญูุธ ุงุชุตุงู ุฏุฑ ุจุฑุงุจุฑ NAT ู ูุงุฑูุงู
- **ูพุดููุงุฏ**: 25 ุซุงูู ุจุฑุง ุงุชุตุงูุงุช ูพุงุฏุงุฑ

### ูฺฉุงุช ููู
- ููู ฺฉูุฏูุง ุจุงุฏ ุฏุฑ ูุฑูุช base64 ุจุงุดูุฏ
- `allowedips` ุชุนู ูโฺฉูุฏ ฺู ุชุฑุงูฺฉ ุงุฒ ุทุฑู ูุฑ peer ุนุจูุฑ ฺฉูุฏ
- `endpoint` ููุท ุจุฑุง ุงุชุตุงู ุงููู ุงุณุชูุงุฏู ูโุดูุฏ
- ุญุฏุงูู ฺฉ peer ุจุงุฏ ุชุนุฑู ุดูุฏ