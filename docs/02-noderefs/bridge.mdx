---
sidebar_position: 100001
---


# Bridge

## ğŸ“– Ù…Ø¹Ø±ÙÛŒ Ú©Ù„ÛŒ

| ÙˆÛŒÚ˜Ú¯ÛŒ              | Ù…Ù‚Ø¯Ø§Ø±                       | ØªÙˆØ¶ÛŒØ­                                                                 |
|--------------------|-----------------------------|------------------------------------------------------------------------|
| Ù†ÙˆØ¹ Ù†ÙˆØ¯            | Tunnel (Ú†Ù†Ø¯Ø¬Ù‡ØªÙ‡)            | Ø¬Ù‡Øª Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† ØªÙˆÙ†Ù„ Ø¨ÛŒâ€ŒÙ…Ø¹Ù†Ø§Ø³Øª.                                            |
| Ù„Ø§ÛŒÙ‡ Ø´Ø¨Ú©Ù‡          | ØªÙ…Ø§Ù… Ù„Ø§ÛŒÙ‡ Ù‡Ø§   | Ø¨Ø§ Ø¯Ø§Ø¯Ù‡ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø®Ø§Ù… Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ùˆ Â«Ø§ØªØµØ§Ù„Â» Ø¨Ø±Ø§ÛŒØ´ Ù…Ø¹Ù†Ø§ Ù†Ø¯Ø§Ø±Ø¯.            |
| Ø¬Ù‡Øª Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ       | Ø¯Ùˆâ€ŒØ¬Ù‡ØªÙ‡                     | Ø¬Ù‡Øª Ø§ÛŒÙ† Ù†ÙˆØ¯ Ø¨Ù‡ Ø®ÙˆØ¯Ù Ø¯Ø§Ø¯Ù‡ Ùˆ Ø²Ù†Ø¬ÛŒØ±Ù‡â€ŒØ§ÛŒ Ú©Ù‡ Ø¯Ø± Ø¢Ù† Ù‚Ø±Ø§Ø± Ú¯Ø±ÙØªÙ‡ Ø¨Ø³ØªÚ¯ÛŒ Ø¯Ø§Ø±Ø¯.   |
| Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¯Ø± Ø²Ù†Ø¬ÛŒØ±Ù‡   | Ø§Ø¨ØªØ¯Ø§ ÛŒØ§ Ø§Ù†ØªÙ‡Ø§ÛŒ Ø²Ù†Ø¬ÛŒØ±Ù‡      | ÙÙ‚Ø· Ø¯Ø± Ø§Ø¨ØªØ¯Ø§ ÛŒØ§ Ø§Ù†ØªÙ‡Ø§ÛŒ ÛŒÚ© Ø²Ù†Ø¬ÛŒØ±Ù‡ Ù‚Ø§Ø¨Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø³Øª.                     |
| ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒ            | ÙˆØ§Ø¨Ø³ØªÙ‡ Ø¨Ù‡ Ø¬ÙØª Ùˆ Ù‡Ù…Ø³Ø§ÛŒÙ‡â€ŒÙ‡Ø§   | Ø§Ú¯Ø± Ø¯Ø± Ø§Ù†ØªÙ‡Ø§ÛŒ Ø²Ù†Ø¬ÛŒØ±Ù‡ Ø¨Ø§Ø´Ø¯ Ø¨Ù‡ Ù†ÙˆØ¯ Ù‚Ø¨Ù„ÛŒ Ùˆ Ø§Ú¯Ø± Ø¯Ø± Ø§Ø¨ØªØ¯Ø§ÛŒ Ø²Ù†Ø¬ÛŒØ±Ù‡ Ø¨Ø§Ø´Ø¯ Ø¨Ù‡ Ù†ÙˆØ¯ Ø¨Ø¹Ø¯ÛŒ ÙˆØ§Ø¨Ø³ØªÙ‡ Ø§Ø³ØªØ› Ø®ÙˆØ¯Ø´ ØµØ±ÙØ§Ù‹ Ø¯Ø§Ø¯Ù‡ Ø±Ø§ Ø¹Ø¨ÙˆØ± Ù…ÛŒâ€ŒØ¯Ù‡Ø¯. |

## Ø¹Ù…Ù„Ú©Ø±Ø¯

Ø¯Ø± Ø²Ù…Ø§Ù† Ù†Ú¯Ø§Ø±Ø´ Ø§ÛŒÙ† Ù…Ø³ØªÙ†Ø¯ØŒ Ø§ÛŒÙ† Ù†ÙˆØ¯ Ø¹Ù…Ù„Ø§Ù‹ Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø®Øª ØªÙˆÙ†Ù„ Ù…Ø¹Ú©ÙˆØ³ (Reverse Tunnel) Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø§Ø­ØªÙ…Ø§Ù„ Ú©Ù…ÛŒ Ø¯Ø§Ø±Ø¯ Ú©Ù‡ Ø¯Ø± Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø± Ø¨Ù‡ Ø¢Ù† Ù†ÛŒØ§Ø² Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯.

Ø¯Ø± Ø§ØºÙ„Ø¨ Ù†ÙˆØ¯Ù‡Ø§ÛŒ Ù„Ø§ÛŒÙ‡Ù” Ø§Ù†ØªÙ‚Ø§Ù„ ÙˆØ§ØªØ±ÙˆØ§Ù„ØŒ Ø¬Ù‡Øª Ø­Ø±Ú©Øª Â«Ú†Ù¾ ğŸ¡ Ø±Ø§Ø³ØªÂ» Ø§Ø³ØªØ› ÛŒØ¹Ù†ÛŒ Ø§ØªØµØ§Ù„â€ŒÙ‡Ø§ Ø§Ø² Ú†Ù¾ Ø´Ø±ÙˆØ¹ Ø´Ø¯Ù‡ Ùˆ Ø¨Ù‡ Ø³Ù…Øª Ø±Ø§Ø³Øª Ø§Ø¯Ø§Ù…Ù‡ Ù¾ÛŒØ¯Ø§ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯.

Ø³Ø§Ø¯Ù‡â€ŒØªØ±ÛŒÙ† Ù†Ù…ÙˆÙ†Ù‡ØŒ Â«Ù¾ÙˆØ±Øª ÙÙˆØ±ÙˆØ§Ø±Ø¯ÛŒÙ†Ú¯Â» Ø§Ø³Øª Ú©Ù‡ Ú†Ù†ÛŒÙ† Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯:

```mermaid
flowchart LR;
    user1 --> A1;

subgraph Waterwall;
    A1[TcpListener] --> B1[TcpConnector];
    end;
    B1 --> C1[SomeWhere];
```

Ø­Ø§Ù„ Ø¨Ø¨ÛŒÙ†ÛŒÙ… Ú†Ø±Ø§ Bridge Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯. Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø®Øª ØªÙˆÙ†Ù„ Ù…Ø¹Ú©ÙˆØ³ Ø¨Ø§ Ø¯Ùˆ Ú†Ø§Ù„Ø´ Ø±ÙˆØ¨Ù‡â€ŒØ±Ùˆ Ø¨ÙˆØ¯ÛŒÙ…Ø› Ù†Ø®Ø³Øª Ø¯Ø± Ø­Ø§Ù„Øª Ú©Ù„Ø§ÛŒÙ†Øª:

- Ø¯Ø± Ú©Ø§Ù†ÙÛŒÚ¯ Ø³Ù…Øª Ø³Ø±ÙˆØ± Ø®Ø§Ø±Ø¬ (Ø­Ø§Ù„Øª Ú©Ù„Ø§ÛŒÙ†Øª)ØŒ Ù†ÙˆØ¯ ReverseClient Ø¨Ø§ÛŒØ¯ ÙÙ‚Ø· Â«Ø§ØªØµØ§Ù„ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†Ø¯Â»Ø› ÛŒØ¹Ù†ÛŒ Ù‡ÛŒÚ† Ù†ÙˆØ¯Ù Listener Ù†Ø¯Ø§Ø±ÛŒÙ….
- Ø§Ø² ÛŒÚ© ReverseClient Ø¨Ù‡ Ø¯Ùˆ Ù…Ù‚ØµØ¯ Ù†ÛŒØ§Ø² Ø¯Ø§Ø±ÛŒÙ…Ø› Ø§Ù…Ø§ Ø¯Ø± Ø³Ø§Ø®ØªØ§Ø± ØªÙ†Ø¸ÛŒÙ…Ø§ØªØŒ Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ ÙÙ‚Ø· ÛŒÚ© ÙÛŒÙ„Ø¯ `next` ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.

### Ø§ÛŒØ¯Ù‡Ù” Ø§ÙˆÙ„ (Ø±Ø¯ Ø´Ø¯Ù‡)

Ø§ÛŒÙ† Ø¨ÙˆØ¯ Ú©Ù‡ ReverseClient Ø¯Ùˆ `next` Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ Ùˆ Ø¢Ù†â€ŒÙ‡Ø§ Ø±Ø§ Ø¯Ø± ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯Ø§Ø®Ù„ÛŒ Ù†ÙˆØ¯ (Ø¨Ø®Ø´ `settings`) ØªØ¹Ø±ÛŒÙ Ú©Ù†ÛŒÙ…ØŒ Ù†Ù‡ Ø¯Ø± Ø³Ø·Ø­ Ø¨ÛŒØ±ÙˆÙ†ÛŒ Ú©Ù‡ ØªÙ†Ù‡Ø§ ÛŒÚ© `next` Ø¯Ø§Ø±Ø¯. Ú†ÛŒØ²ÛŒ Ø´Ø¨ÛŒÙ‡ Ø¨Ù‡:

```json
{
    "name": "node_name",
    "type": "ReverseClient",
    "settings": {
        "next-core": "next_core_node_name", // xray core inbound
        "next-peer": "next_peer_node_name"   // server iran
    }
}
```

```mermaid
flowchart LR;
    Rc[ReverseClient] --> O1[TcpConnector next-core]
    Rc --> O2[TcpConnector next-peer]
```

Ø§ÛŒÙ† Ø§ÛŒØ¯Ù‡ Ø¬Ø°Ø§Ø¨ Ù†Ø¨ÙˆØ¯Ø› ØªØ±Ø¬ÛŒØ­ Ø¯Ø§Ø¯ÛŒÙ… Ù‡Ù…Ú†Ù†Ø§Ù† Ø§Ø² Ù‡Ù…Ø§Ù† `next` Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ….

---

## Ø§ÛŒØ¯Ù‡Ù” Ø¯ÙˆÙ… (Ù¾Ø°ÛŒØ±ÙØªÙ‡â€ŒØ´Ø¯Ù‡)

Ø¯Ø± Ø§ÛŒÙ† Ø§ÛŒØ¯Ù‡ Ø§Ø² `next` Ø¨Ø±Ø§ÛŒ Ù…Ø³ÛŒØ± Â«peerÂ» Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…Ø› ÛŒØ¹Ù†ÛŒ Ù…Ø³ÛŒØ±ÛŒ Ú©Ù‡ Ø¨Ù‡ ReverseServer Ù…ÛŒâ€ŒØ±Ø³Ø¯:

```json
{
    "name": "node_name",
    "type": "ReverseClient",
    "settings": {
    },
    "next": "next_peer_node_name"  // server iran
}
```

```mermaid
flowchart LR;
    Rc[ReverseClient] -->  O2[TcpConnector next-peer]
```

Ø§Ù…Ø§ Ù†ÙˆØ¯ Ù…ØªØµÙ„â€ŒØ´ÙˆÙ†Ø¯Ù‡ Ø¨Ù‡ Ù…Ù‚ØµØ¯ Ù†Ù‡Ø§ÛŒÛŒ (Ù…Ø«Ù„Ø§Ù‹ xray) Ú©Ø¬Ø§ Ù‚Ø±Ø§Ø± Ø¨Ú¯ÛŒØ±Ø¯ØŸ Ù…ÛŒâ€ŒØ®ÙˆØ§Ø³ØªÛŒÙ… Ø¢Ù† Ø±Ø§ Â«Ù¾Ø´ØªÂ» ReverseClient Ø¨Ú¯Ø°Ø§Ø±ÛŒÙ…:

```json
{
    "name": "outbound_xray",
    "type": "TcpConnector",
    "settings": {
        "address": "127.0.0.1",
        "port": 1234
    }
},
{
    "name": "node_reverse_client_name",
    "type": "ReverseClient",
    "settings": {
    },
    "next": "next_peer_node_name"  // server iran
}
```

```mermaid
flowchart LR;
    O1[TcpConnector next-core] <-- ReverseClient  -->  O2[TcpConnector next-peer]
```

Ø§Ù…Ø§ Ø§ÛŒÙ† Ù…Ù†Ø·Ù‚ÛŒ Ù†ÛŒØ³ØªØ› Ú†ÙˆÙ† ØªÙ‚Ø±ÛŒØ¨Ø§Ù‹ Ù‡Ù…Ù‡Ù” Ù†ÙˆØ¯Ù‡Ø§ÛŒ Ù„Ø§ÛŒÙ‡Ù” Ø§Ù†ØªÙ‚Ø§Ù„ Ø¬Ù‡Øªâ€ŒØ´Ø§Ù† Â«Ú†Ù¾ ğŸ¡ Ø±Ø§Ø³ØªÂ» Ø§Ø³ØªØŒ Ø¯Ø± Ø­Ø§Ù„ÛŒ Ú©Ù‡ Ø§ÛŒÙ†Ø¬Ø§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒÙ… Ø§Ø² Â«Ø±Ø§Ø³Øª ğŸ¡ Ú†Ù¾Â» Ø­Ø±Ú©Øª Ú©Ù†ÛŒÙ…. Ù¾Ø³ Ø¨Ù‡ Ù†ÙˆØ¯ÛŒ Ù†ÛŒØ§Ø² Ø¯Ø§Ø±ÛŒÙ… Ú©Ù‡ Â«Ø¬Ù‡ØªÂ» Ø±Ø§ Ù…Ø¹Ú©ÙˆØ³ Ú©Ù†Ø¯Ø› Ù†ÙˆØ¯ÛŒ Ø¨Ø§ Ø¯Ùˆ Ù…Ø³Ø¦ÙˆÙ„ÛŒØª Ø±ÙˆØ´Ù†:

- Ø§Ú¯Ø± Ø¯Ø± Ø§Ø¨ØªØ¯Ø§ÛŒ Ù…Ø³ÛŒØ± Ø¨Ø§Ø´Ø¯: Ù‡Ø± Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø±Ø§ Ú©Ù‡ Ø§Ø² Ø±Ø§Ø³Øª Ø¨Ù‡ Ú†Ù¾ Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯ØŒ Ø¨Ù‡ Ú†Ù¾ ğŸ¡ Ø±Ø§Ø³Øª Ù…Ù†ØªÙ‚Ù„ Ú©Ù†Ø¯.
- Ø§Ú¯Ø± Ø¯Ø± Ø§Ù†ØªÙ‡Ø§ÛŒ Ø²Ù†Ø¬ÛŒØ±Ù‡ Ø¨Ø§Ø´Ø¯: Ù‡Ø± Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø±Ø§ Ú©Ù‡ Ø§Ø² Ú†Ù¾ Ø¨Ù‡ Ø±Ø§Ø³Øª Ù…ÛŒâ€ŒØ¢ÛŒØ¯ØŒ Ø¨Ù‡ Ø±Ø§Ø³Øª ğŸ¡ Ú†Ù¾ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯.

Ø§ÛŒÙ† Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù‡Ù…Ø§Ù† Ú†ÛŒØ²ÛŒ Ø§Ø³Øª Ú©Ù‡ Bridge Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.

```mermaid
flowchart LR;
    B1[Bridge] <-- ReverseClient -->  O2[TcpConnector next-peer]

    B2[Bridge] --> O1[TcpConnector next-core]
```

Ùˆ Ø§Ú¯Ø± Ø¯Ø± Ø§Ù†ØªÙ‡Ø§ÛŒ Ø²Ù†Ø¬ÛŒØ±Ù‡ Ø¨Ø§Ø´Ø¯ (Ø³Ù†Ø§Ø±ÛŒÙˆÛŒ ReverseServer):

```mermaid
flowchart LR;
    I1[TcpListener for-users] --> ReverseServer --> B1[Bridge]

    I2[TcpListener for-peer] --> B2[Bridge]
```

Ø¨Ù‡ Ø§ÛŒÙ† ØªØ±ØªÛŒØ¨ØŒ Bridge Ø¨Ù‡â€ŒÙˆØ¬ÙˆØ¯ Ø¢Ù…Ø¯. Ø¯Ø± ØªÙ†Ø¸ÛŒÙ…Ø§ØªØŒ Ù†Ø§Ù… Â«Ø¬ÙØªÂ» Ø®ÙˆØ¯ Ø±Ø§ Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯ Ùˆ Ø¨Ø§ Ø¢Ù† Ø¬ÙØª Ù…ÛŒâ€ŒØ´ÙˆØ¯Ø› Ù‡Ø± Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ú©Ù‡ ÙˆØ§Ø±Ø¯ ÛŒÚ© Bridge Ø´ÙˆØ¯ØŒ Ø§Ù†Ú¯Ø§Ø± ÙˆØ§Ø±Ø¯ Ø¬ÙØªØ´ Ø´Ø¯Ù‡ Ø§Ù…Ø§ Ø¯Ø± Â«Ø¬Ù‡Øª Ù…Ø®Ø§Ù„ÙÂ» Ø®Ø§Ø±Ø¬ Ù…ÛŒâ€ŒØ´ÙˆØ¯.

## âš™ï¸ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ

```json
{
    "name": "b1",
    "type": "Bridge",
    "settings": {
        "pair": "b2"
    },
    "next": "next_node_name" // optional (when making reverse client)
},

{
    "name": "b2",
    "type": "Bridge",
    "settings": {
        "pair": "b1"
    },
    "next": "next_node_name" // optional (when making reverse client)
}
```

Ù†Ú©Ø§Øª:
- Ø§ÛŒÙ† Ù†ÙˆØ¯ Ù‡Ù…ÛŒØ´Ù‡ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø²ÙˆØ¬ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ Ú†ÙˆÙ† Ø¨Ù‡ Â«Ø¬ÙØªÂ» Ø®ÙˆØ¯ Ù†ÛŒØ§Ø² Ø¯Ø§Ø±Ø¯.
- Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù…Ø«Ù„ ÛŒÚ© Ø¢ÛŒÙ†Ù‡ Ø¹Ù…Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯: Ù‡Ø±Ú†Ù‡ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†Ø¯ØŒ Ø¨Ù‡ Ø¬ÙØªØ´ Ù…ÛŒâ€ŒÙØ±Ø³ØªØ¯ ØªØ§ Ø¯Ø± Ø¬Ù‡Øª Ù…Ø®Ø§Ù„Ù Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆØ¯.

---

Ø¨Ø§ BridgeØŒ Ø³Ù†Ø§Ø±ÛŒÙˆÛŒ ReverseClient Ú©Ø§Ù…Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯: Ø§Ø² Ø³Ù…Øª `next` Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ù‡Ù…ØªØ§ (peer) Ø¨Ø±Ù‚Ø±Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Ùˆ Ø§Ø² Ø³Ù…Øª Â«Ø¹Ù‚Ø¨Â» Ø¨Ù‡ Ù‡Ø³ØªÙ‡ (Ù…Ø«Ù„Ø§Ù‹ xray) ÙˆØµÙ„ Ù…ÛŒâ€ŒØ´ÙˆÛŒÙ….

```mermaid
flowchart LR;
    B1[Bridge] <-- ReverseClient -->  O2[TcpConnector next-peer]

    B2[Bridge] --> O1[TcpConnector next-core]
```

### Ù…Ø«Ø§Ù„ Ú©Ø§Ù…Ù„ JSON Ø¨Ø±Ø§ÛŒ ReverseClient

```json
{
    "name": "outbound_to_core",
    "type": "TcpConnector",
    "settings": {
        "nodelay": true,
        "address": "127.0.0.1",
        "port": 443
    }
},

{
    "name": "bridge1",
    "type": "Bridge",
    "settings": {
        "pair": "bridge2"
    },
    "next": "outbound_to_core"
},

{
    "name": "bridge2",
    "type": "Bridge",
    "settings": {
        "pair": "bridge1"
    },
    "next": "reverse_client"
},

{
    "name": "reverse_client",
    "type": "ReverseClient",
    "settings": {
        "minimum-unused": 4
    },
    "next": "outbound_to_iran"
},

{
    "name": "outbound_to_iran",
    "type": "TcpConnector",
    "settings": {
        "nodelay": true,
        "address": "1.1.1.1",
        "port": 443
    }
}
```
