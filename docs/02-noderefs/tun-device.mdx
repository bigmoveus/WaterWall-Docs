---
sidebar_position: 100500
---

# TunDevice

## ๐ ูุนุฑู ฺฉู

| ูฺฺฏ               | ููุฏุงุฑ                     | ุชูุถุญ                                                                 |
|---------------------|---------------------------|------------------------------------------------------------------------|
| ููุน ููุฏ             | Adapter (ุฏูโุฌูุชู)         | ุชุฑุงูฺฉ ุงุฒ ูุฑ ุฏู ุณูุช ูโุชูุงูุฏ ุงุฑุณุงู ู ุฏุฑุงูุช ุดูุฏุ ุจุณุชู ุจู ุฌุงฺฏุงู ุขู ุฏุฑ ุฒูุฌุฑู |
| ูุงู ุดุจฺฉู           | ูุงู ณ                    | ฺฉุงุฑ ุจุง ุจุณุชูโูุง (Packet) ุจุฏูู ุชุบุฑ ุงูุฏุงุฒู ุขูโูุง                      |
| ูููุนุช ุฏุฑ ุฒูุฌุฑู    | ุงุจุชุฏุง ุฒูุฌุฑู ุง ุงูุชูุง ุฒูุฌุฑู | ููุท ุฏุฑ ุงุจุชุฏุง ุง ุงูุชูุง ุฒูุฌุฑู ูุงุจู ุงุณุชูุงุฏู ุงุณุช                      |
| ูุงุจุณุชฺฏ             | ููุฏ ูุจู/ุจุนุฏ               | ุจุฑุง ุฏุฑุงูุช/ุงุฑุณุงู ุฏุงุฏู ุถุฑูุฑ ุงุณุช                                      |

---




ุงู ููุฏุ ฺฉ ุฏุณุชฺฏุงู ูุงู ณ ุณุณุชูโุนุงูู ุงุณุช.

ุจุฑุง ูููฺฉุณ ู ููุฏูุฒ ูพุงุฏูโุณุงุฒ ุดุฏู ุงุณุชุ ุฑู ุงูุฏุฑูุฏ ูุฒ ฺฉุงุฑ ูโฺฉูุฏ ุงูุง ูุงุฒ ุจู ุฏุณุชุฑุณ ุฑูุช ุฏุงุฑุฏ.

ูุฏู ุงุตู ุงู ููุฏ ุงุณุชูุงุฏู ุฑู ููุฏูุฒ ู ูููฺฉุณ ุงุณุชุ ุฏุฑ ููุจุงู ุงู ฺฉุงุฑ ุจู ุดูู ุฏฺฏุฑ ุงูุฌุงู ูโุดูุฏ ฺฉู ุฎุงุฑุฌ ุงุฒ ุจุญุซ ุงู ุณูุฏ ุงุณุช.

ุงู ููุฏ ฺฉ ุฏุณุชฺฏุงู ุจุง ูุงู ู ูุญุฏูุฏู ุขโูพ ุงูุชุฎุงุจ ูโุณุงุฒุฏ ฺฉู ูุงุจูุช ุงุฑุณุงู ู ุฏุฑุงูุช ุจุณุชู ุจู/ุงุฒ ุณุณุชูโุนุงูู ุฑุง ุฏุงุฑุฏ.

:::caution
ุงู ููุฏ ููุท ุงุฒ IPv4 ูพุดุชุจุงู ูโฺฉูุฏุ ุชูุงู ุจุณุชูโูุง ฺฉู ูุณุฎู IP ุขูโูุง ุบุฑ ุงุฒ ด ุจุงุดุฏ ุฑุฏ ูโุดููุฏ.
:::

:::info ูฺฉุงุช ุขููุฒุด ุชุฎุตุต
ููุช ฺฉ ุฏุณุชฺฏุงู ุจุง ุงู ูุดุฎุตุงุช ุจุณุงุฒุฏ:

```sh
10.10.0.1/24
```
ุงู ุนู ุฎูุฏ ุขโูพ 10.10.0.1 ูุชุนูู ุจู ุณุณุชูโุนุงูู ุงุณุชุ ุงฺฏุฑ ุจุง ุงู ุขโูพ ฺฉุงุฑ ฺฉูุฏ ุง ุญุช ุขู ุฑุง ูพูฺฏ ุจฺฏุฑุฏุ ูุงุชุฑูุงู ุงุตูุงู ูุชูุฌู ููโุดูุฏ.

ุนู:

```sh
ping 10.10.0.1
```

ูุดุงุจู ุงู ุงุณุช ฺฉู ุจฺฏูุฏ:

```sh
ping 127.0.0.1
```

ุงูุง ุงฺฏุฑ ฺฉ ุขโูพ ุฏฺฏุฑ ุฏุงุฎู ููุงู ูุญุฏูุฏูโุง ฺฉู ุจุง ุณุงุจโูุช ูุดุฎุต ฺฉุฑุฏูโุงุฏ ุฑุง ูพูฺฏ ุจฺฏุฑุฏ ุง ุจุณุชูโุง ุจู ุขู ุจูุฑุณุชุฏุ ุขูโููุช ูุงุชุฑูุงู ุจุณุชู ุฑุง ุฏุฑุงูุช ฺฉุฑุฏู ู ุจุณุชู ูุงุฑุฏ ุฒูุฌุฑู ูพุฑุฏุงุฒุด ูโุดูุฏ.

ููุช ูุซูุงู ุงู ุฑุง ุงุฌุฑุง ฺฉูุฏ:

```sh
ping 10.10.0.2
```

ุจุณุชูโุง ฺฉู ุชูุณุท ูุงุชุฑูุงู ุฏุฑุงูุช ูโุดูุฏ ุฏุงุฑุง ุขโูพ ูุจุฏุฃ = 10.10.0.1 ู ุขโูพ ููุตุฏ = 10.10.0.2 ุงุณุช.

ุณูพุณ ูโุชูุงูุฏ ุฏุฑ ุงุฏุงูู ุฒูุฌุฑูุ ุขโูพโูุง ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ููุฏ IpOverrider ุชุบุฑ ุฏูุฏ ู ุชุฑููุฏูุง ูุฎุชูู ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ููุฏ IpManipulator ุงุนูุงู ฺฉูุฏ.
:::

ุงู ููุฏ ฺฉ ุขุฏุงูพุชุฑ ุงุณุชุ ุจู ุฒูุฌุฑูโูุง ูุนูุง ูโุฏูุฏ. ูู ูโุชูุงูุฏ ุดุฑูุนโฺฉููุฏู ุฒูุฌุฑู ุจุงุดุฏ ู ูู ูพุงุงูโุฏููุฏู ุฒูุฌุฑู.

:::note ุฏูุช ฺฉูุฏ
ุงู ููุฏ ูู ูโุชูุงูุฏ ุฏุฑ ุงุจุชุฏุง ุฒูุฌุฑู ูุฑุงุฑ ฺฏุฑุฏ ู ูู ุฏุฑ ุงูุชูุง.

### ุงฺฏุฑ ุฏุฑ ุดุฑูุน ุฒูุฌุฑู ุจุงุดุฏ
ุจุณุชูโูุง ุฏุฑุงูุช ุจู ุณูุช ุฑุงุณุช (upstream) ูุฑุณุชุงุฏู ูโุดููุฏ ู ููฺูู ุจุณุชูโูุง ฺฉู ุงุฒ ุฑุงุณุช ุจู ฺูพ ุฏุฑุงูุช ุดููุฏุ ุจู ุณุณุชูโุนุงูู ุชุญูู ุฏุงุฏู ูโุดููุฏ.

```mermaid
flowchart LR;
    OS[ุณุณุชูโุนุงูู] <--> T[TunDevice] -->  Ns1[Node1] -->  Ns2[Node2] --> inv[...]
    style inv fill:transparent,stroke:transparent
    style OS fill:transparent,stroke:transparent
```


### ุงฺฏุฑ ุฏุฑ ูพุงุงู ุฒูุฌุฑู ุจุงุดุฏ
ูโุชูุงูุฏ ุงู ููุฏ ุฑุง ุฏุฑ ูพุงุงู ุฒูุฌุฑู ูุฒ ูุฑุงุฑ ุฏูุฏุ ุฏุฑ ุงู ุญุงูุชุ ุจุณุชูโูุง ฺฉู ุงุฒ ฺูพ ุจู ุฑุงุณุช ูโุขูุฏ ุจู ุณุณุชูโุนุงูู ุชุญูู ูโุดููุฏ ู ุจุณุชูโูุง ฺฉู ุงุฒ ุณุณุชูโุนุงูู ุฏุฑุงูุช ูโุดููุฏุ ุจู ุณูุช ฺูพ ููุดุชู ุฎูุงููุฏ ุดุฏ.

```mermaid
flowchart RL
    OS[ุณุณุชูโุนุงูู] <--> T[TunDevice] -->  Ns1[Node2] -->  Ns2[Node1] --> inv[...]
    style inv fill:transparent,stroke:transparent
    style OS fill:transparent,stroke:transparent
```
:::

ููฺูู ูโุชูุงูุฏ ุงู ููุฏ ุฑุง ูู ุฏุฑ ุดุฑูุน ู ูู ุฏุฑ ูพุงุงู ูุฑุงุฑ ุฏูุฏ ู ฺฉ ุฒูุฌุฑู ฺฉุงูู ุจุณุงุฒุฏุ ููุท ุฏูุช ฺฉูุฏ ฺฉู ูุญุฏูุฏูโูุง ุขโูพ ู ูุงู ุฏุณุชฺฏุงูโูุง ุจุง ูู ุชุฏุงุฎู ูุฏุงุดุชู ุจุงุดูุฏ.

## โ๏ธ ุฑุงูููุง ูพฺฉุฑุจูุฏ

ุงู ููุฏ ุจู ุงู ุดฺฉู ุชูุธู ูโุดูุฏ:

```json
{
  "name": "node_name",
  "type": "TunDevice",
  "settings": {
    "device-name": "wtun0",
    "device-ip": "10.10.0.1/24",
    "device-mtu": 1500
  },
  "next": "next_node_name"
}
```

ูพุงุฑุงูุชุฑ `device-name`

ุงู ูพุงุฑุงูุชุฑ ุงุฌุจุงุฑ ุงุณุช ู ูุงู ุฏุณุชฺฏุงู ุฑุง ุจู ุณุณุชูโุนุงูู ุงุนูุงู ูโฺฉูุฏ. ูโุชูุงูุฏ ุฏุณุชฺฏุงู ุณุงุฎุชูโุดุฏู ุฑุง ุจุง ุฏุณุชูุฑ ุฒุฑ ูุดุงูุฏู ฺฉูุฏ:

```sh
ip a
```

:::caution
ููู ุงุณุช ฺฉู ุงู ูุงู ุจุง ุฏุณุชฺฏุงู ุฏฺฏุฑ (ฺู ุฏุฑ ูุงุชุฑูุงู ู ฺู ุฏุฑ ุจุฑูุงููโูุง ุฏฺฏุฑ ุณุณุชูโุนุงูู) ฺฉ ูุจุงุดุฏ.
:::

ูพุงุฑุงูุชุฑ `device-ip`

ุงู ูพุงุฑุงูุชุฑ ุงุฌุจุงุฑ ุงุณุช. ฺฉ ุขโูพ ุจุง ุณุงุจโูุช ูุงุณฺฉ ูุงุฑุฏ ฺฉูุฏุ ูุซูุงู:

```
10.10.0.1/24
10.20.0.1/24
10.30.0.1/24
```

:::caution
ุฏูุช ฺฉูุฏ ฺฉู ูุญุฏูุฏู ุขโูพโูุง ุจุง ุฏุณุชฺฏุงู ุฏฺฏุฑ ุชุฏุงุฎู ูุฏุงุดุชู ุจุงุดุฏ. ุงู ููุฏ ุฏุฑ ุญุงู ุญุงุถุฑ ููุท ุงุฒ IPv4 ูพุดุชุจุงู ูโฺฉูุฏ.
:::

ูพุงุฑุงูุชุฑ `device-mtu`

ุงู ูพุงุฑุงูุชุฑ ุงุฎุชุงุฑ ุงุณุชุ ุงฺฏุฑ ููุฏุงุฑุฏู ูุดูุฏุ ุงุฒ ููุฏุงุฑ MTU ฺฉู ุฏุฑ ูุงู `core.json` ุฏุงุฏูโุงุฏ ุงุณุชูุงุฏู ูโฺฉูุฏ. ุงฺฏุฑ ุขูุฌุง ูู ุชูุธู ูฺฉุฑุฏู ุจุงุดุฏุ ููุฏุงุฑ ูพุดโูุฑุถ 1500 ุงุณุช. ููฺฉู ุงุณุช ุจุฎูุงูุฏ ุงู ููุฏุงุฑ ุฑุง ฺฉูุชุฑ ุงุฒ ููุฏุงุฑ ูุนู ุชูุธู ฺฉูุฏ ุงฺฏุฑ ูพุฑูุชฺฉูโูุง ุงุฌุฑุง ูโฺฉูุฏ ฺฉู ุณุฑุจุงุฑ ุจุณุชู ุงุถุงูู ูโฺฉููุฏ (ูุซู WireGuard).

:::caution ูฺฉุชู ููู
ุงฺฏุฑ ุฏุฑ ุฒูุฌุฑู ุงุฒ ููุฏ `RawDevice` ุงุณุชูุงุฏู ฺฉุฑุฏูโุงุฏุ ุจู ูฺโูุฌู MTU ุฑุง ุฏุฑ ุงู ููุฏ ุชุบุฑ ูุฏูุฏ ู ุขู ุฑุง ุจุฑุงุจุฑ ุจุง MTU ุณุณุชูโุนุงูู ูุฑุงุฑ ุฏูุฏ.

ุนู ฺฉโุจุงุฑ ุฏุฑ ูุงู `core.json` ููุฏุงุฑ MTU ฺฉุงุฑุช ุดุจฺฉู ุฎูุฏ ุฑุง ุจูโุฏุฑุณุช ูุงุฑุฏ ฺฉูุฏ ู ุฏฺฏุฑ ุฏุฑ ููุฏูุง TunDevice ุงู ููุฏุงุฑ ุฑุง ุณุช ูฺฉูุฏุ ุฒุฑุง ููุฏ `RawDevice` ุจุณุชูโูุง ุฑุง ูุณุชููุงู ุงุฒ ฺฉุงุฑุช ุดุจฺฉู ุจุฑูโุฏุงุฑุฏ ฺฉู MTU ุขู ุซุงุจุช ู ุบุฑูุงุจู ุชุบุฑ ุงุณุช. ุงฺฏุฑ ุฏุฑ ุงูุฌุง MTU ฺฉูุชุฑ ุชุนู ฺฉุฑุฏู ุจุงุดุฏุ ุณุณุชูโุนุงูู ููฺฉู ุงุณุช ุจุณุชูโูุง ุฑุง ูุจูู ูฺฉูุฏ.
:::

:::tip ูฺฉุชู
ุฏุฑ ุตูุฑุช ูุฌูุฏ ูุดฺฉู ูุฑุชุจุท ุจุง MTUุ ูุงุชุฑูุงู ุงู ููุถูุน ุฑุง ุจูโุทูุฑ ฺฉุงูู ุฏุฑ ูุงฺฏโูุง ฺฏุฒุงุฑุด ูโฺฉูุฏ ูุฑ ุจุงุฑ ฺฉู ูุฑุงุฑ ุงุณุช ุจุณุชูโุง ููุดุชู ุดูุฏุ ูพุณ ุฎูุงูุฏู ูุงฺฏโูุง ฺฉูฺฉโฺฉููุฏู ุงุณุช.
:::













