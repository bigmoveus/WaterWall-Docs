---
sidebar_position: 100
---

# TcpListener

## ๐ **ูุนุฑู ฺฉู**

ฺฏุฑู **TcpListener** ฺฉ ุงุฒ ุจูุงุฏโุชุฑู ู ุญุงุชโุชุฑู ุงุฌุฒุง WaterWall ุงุณุช ฺฉู ูุณุฆููุช ูพุฐุฑุด ู ูุฏุฑุช ุงุชุตุงูุงุช TCP ูุฑูุฏ ุฑุง ุจุฑ ุนูุฏู ุฏุงุฑุฏ. ุงู ููุฏ ุจู ุนููุงู ููุทู ูุฑูุฏ ุงุตู ุจุฑุง ุชุฑุงูฺฉ ุดุจฺฉู ุนูู ูโฺฉูุฏ.

### ๐ง **ูุดุฎุตุงุช ูู ุงุณุงุณ**

| ูฺฺฏ | ููุฏุงุฑ | ุชูุถุญ |
|--------|--------|--------|
| **ููุน ููุฏ** | Adapter (ุชฺฉโุฌูุชู) | ุฌูุช ฺฉุงูฺฉุดู ูุง ุงุฒ ฺูพ ุดุฑูุน ู ุจู ุฑุงุณุช ูพุด ุฑู ูโฺฉููุฏ |
| **ูุงู ุดุจฺฉู** | ูุงู ด (Transport Layer) | ฺฉุงุฑ ุจุง ฺฉุงูฺฉุดูโูุงุ ูู ูพฺฉุชโูุง ุฎุงู |
| **ุฌูุช ูพุดุชุจุงู** | ฺูพ ุจู ุฑุงุณุช (Left to Right) | ุฏูุฌูุชู ูุณุช ูุซู ุจุนุถ ููุฏูุง ูุงู ณ |
| **ูููุนุช ุฏุฑ ุฒูุฌุฑ** | ุงุจุชุฏุง ุฒูุฌุฑ (Entry Point) | ุฌุงฺฏุงู ุฏฺฏุฑ ููโุชูุงูุฏ ุฏุงุดุชู ุจุงุดุฏ |
| **ูุงุจุณุชฺฏ** | ูุงุฒ ุจู ุญุฏุงูู ฺฉ ููุฏ ุฏุฑ ุจุฎุด `next` | ุจุฑุง ุงูุชูุงู ุฏุงุฏูโูุง ุถุฑูุฑ ุงุณุช |


:::info ูฺฉุงุช

- **ุฌุงฺฏุงู ุซุงุจุช**: ุงู ููุฏ ุญุชูุงู ุจุงุฏ ุฏุฑ ุงุจุชุฏุง ฺฉ ุฒูุฌุฑ ูุฑุงุฑ ฺฏุฑุฏ ู ููโุชูุงูุฏ ุฏุฑ ูุงูู ุง ุงูุชูุง ุฒูุฌุฑ ุงุณุชูุงุฏู ุดูุฏ
- **ูุงุจุณุชฺฏ ุงุฌุจุงุฑ**: ุจุฑุง ุนููฺฉุฑุฏ ุตุญุญุ ุญุชูุงู ูุงุฒ ุจู ูุนุฑู ุญุฏุงูู ฺฉ ููุฏ ุฏุฑ ุจุฎุด `next` ุฏุงุฑุฏ ุชุง ุฏุงุฏูโูุง ุจู ุขู ููุชูู ฺฉูุฏ
- **ุนุฏู ุฏูุฌูุชู ุจูุฏู**: ุจุฑุฎูุงู ุจุฑุฎ ููุฏูุง ูุงู ณุ ุงู ููุฏ ููุท ุงุฒ ุฌูุช ฺูพ ุจู ุฑุงุณุช ุฏุงุฏู ููุชูู ูโฺฉูุฏ
- **ููุฏ Adapter**: ุงู ููุฏ ฺฉ Adapter ุงุณุช

:::

---

## ๐ฏ **ูุงุจูุชโูุง ู ุนููฺฉุฑุฏูุง**

ฺฏุฑู TcpListener ูุธุงู ุฒุฑ ุฑุง ุงูุฌุงู ูโุฏูุฏ ฺฉู ุฏุฑ ุงุฏุงูู ุฏููโุชุฑ ุชูุถุญ ุฏุงุฏู ูโุดููุฏ:

### ๐ **ูุฏุฑุช ุงุชุตุงูุงุช TCP**
- **ุณุฑูุฑ TCP**: ฺฏูุด ุฏุงุฏู ุจู ุงุชุตุงูุงุช TCP ูุฑูุฏ ุฑู ุขุฏุฑุณ ู ูพูุฑุช ูุดุฎุต ุดุฏู
- **ูุฏุฑุช ฺุฑุฎู ุญุงุช**: ฺฉูุชุฑู ฺฉุงูู ุณูฺฉุชโูุง ุงุฒ ุงุฌุงุฏ ุชุง ุจุณุชู ุดุฏู ู ุงูุชูุงู ุฏุงุฏูโูุง ุจู ฺฏุฑู ุจุนุฏ
- **ุงูุชูุงู ุฏุงุฏู**: ูุฏุงุช ูุทูุฆู ุฏุงุฏูโูุง ุจู ฺฏุฑู ุจุนุฏ ุฏุฑ ุฒูุฌุฑ

### ๐ **ฺฉูุชุฑู ุฏุณุชุฑุณ ูพุดุฑูุชู**
- **Whitelist**: ูพุงุฏูโุณุงุฒ ููุชุฑูฺฏ whitelist ุจุฑุง ุขุฏุฑุณโูุง IP ฺฉูุงูุช
- **Blacklist**: ูพุงุฏูโุณุงุฒ ููุชุฑูฺฏ blacklist ุจุฑุง ุขุฏุฑุณโูุง IP ฺฉูุงูุช  
- **ููุชุฑูฺฏ CIDR**: ูพุดุชุจุงู ุงุฒ ูุฑูุชโูุง ูุฎุชูู ุดุจฺฉู ูุงููุฏ `/24`, `/32`

### โ๏ธ **ุณุณุชู ุชุนุงุฏู ุจุงุฑ (Load Balancing)**
- **ุชูุฒุน ููุดููุฏ**: ูพุดุชุจุงู ุงุฒ ุชูุฒุน ุงุชุตุงูุงุช ูุฑูุฏ ุจู ฺูุฏู listener
- **ุณุณุชู ฺฏุฑููโุจูุฏ**: ูุฏุฑุช listener ูุง ุฏุฑ ฺฏุฑููโูุง ุชุนุงุฏู
- **ฺฉูุชุฑู ุฒูุงู**: ุชูุธู ููุงุตู ุฒูุงู ุจุฑุง ุชุฎุตุต ูุฌุฏุฏ

### ๐ช **ูพุดุชุจุงู ฺูุฏ ูพูุฑุช**
- **ูพูุฑุช ูููุฑุฏ**: ูุงุจูุช ฺฏูุด ุฏุงุฏู ุจู ูพูุฑุชโูุง ูุฌุฒุง
- **ูุญุฏูุฏู ูพูุฑุช**: ูุงุจูุช ฺฏูุด ุฏุงุฏู ุจู ูุญุฏูุฏูโุง ุงุฒ ูพูุฑุชโูุง
- **ุจูููโุณุงุฒ ููุงุจุน**: ุงุณุชูุงุฏู ุงุฒ iptables ุจุฑุง ูุฏุฑุช ุจููู ูพูุฑุชโูุง ูุชุนุฏุฏ

### ๐ **ุณุณุชู ุงูููุชโุจูุฏ**
- **ููโูพูุดุงู ููุดููุฏ**: ูุงุจูุช ูุฌูุฏ ฺูุฏ ฺฏูุดโุฏููุฏู ุจู ฺฉ ูพูุฑุช ู ุชุตููโฺฏุฑ ุจุฑ ุงุณุงุณ ุงูููุช
- **ูุญุงุณุจู ุงูููุช**: ุชุนู listener ููุงุณุจ ุจุฑ ุงุณุงุณ ุชูุธูุงุช
- **ุชุตููโฺฏุฑ ูพูุง**: ุงูุชุฎุงุจ ุจูุชุฑู listener ุจุฑ ุงุณุงุณ ุดุฑุงุท

---

## โ๏ธ **ุฑุงูููุง ูพฺฉุฑุจูุฏ**

### ๐ **ุณุงุฎุชุงุฑ ฺฉู**

```json
{
  "name": "listener_name",
  "type": "TcpListener",
  "settings": {
    // ุชูุธูุงุช ูพุงู
    "address": "0.0.0.0",
    "port": 8443,
    "nodelay": true,
    
    // ุชูุธูุงุช ุงุฎุชุงุฑ
    "whitelist": [],
    "blacklist": [],
    "balance-group": "",
    "balance-interval": 60000,
    "interface": "",
    "multiport-backend": "iptables"
  },
  "next": "next_node_name"
}
```

### ๐ง **ูพุงุฑุงูุชุฑูุง ุถุฑูุฑ**

#### **1. Address (ุขุฏุฑุณ ฺฏูุด ุฏุงุฏู)**
```json
"address": "0.0.0.0"
```

**ููุงุฏุฑ ูุนุชุจุฑ:**
- `"0.0.0.0"`: ฺฏูุด ุฏุงุฏู ุจู ุชูุงู interface ูุง (IPv4)
- `"127.0.0.1"`: ููุท localhost (IPv4)
- `"::"`: ฺฏูุด ุฏุงุฏู ุจู ุชูุงู interface ูุง (IPv6)
- IP ุฎุงุต: ูุงููุฏ `"192.168.1.100"`

#### **2. Port (ูพูุฑุช)**

**ูพูุฑุช ูููุฑุฏ:**
```json
"port": 8443
```

**ูุญุฏูุฏู ูพูุฑุช:**
```json
"port": [8000, 9000]
```

**โ๏ธ ูฺฉุชู ููู**: ุฏุฑ ุญุงูุช ูุญุฏูุฏู ูพูุฑุชุ ุชูุงู ูพูุฑุชโูุง ุฏุงุฎู ุจุงุฒู (8000 ุชุง 9000) ฺฏูุด ุฏุงุฏู ุฎูุงููุฏ ุดุฏ.

#### **3. Nodelay (ุจูููโุณุงุฒ TCP)**
```json
"nodelay": true
```

**๐ ุฏูู ุงููุช ุงู ูพุงุฑุงูุชุฑ**: 
ุจู ูุธุฑ ูู ุตุฑูโูุธุฑ ุงุฒ ุณูุงุฑู ฺฉู ูโุฎูุงูุฏ ูพุงุฏู ฺฉูุฏุ ููุดู Nodelay ุฑุง ูุนุงู ฺฉูุฏ.

**ุชูุถุญ ุณุงุฏู**: ุณุณุชู ุนุงูู ุจุฑุง ุงุฑุณุงูโูุง ฺฉู ุณุงุฒ ุฒุงุฏ ูุฏุงุฑูุฏ ุชุฃุฎุฑ ูโฺฏุฐุงุฑุฏ ู ุง ุงุตูุงู ููโูุฑุณุชุฏ ุจู ุฎุงุทุฑ ฺฉุงูุด ูุตุฑู CPU ุง ุงูฺฉู ูพููุง ุจุงูุฏ ฺฉูุชุฑ ูุตุฑู ุดูุฏ ฺฉู ุงู ุงุตูุงู ุจุฑุง ุงุณุชูุงุฏูโูุง ูุง ุฎูุจ ูุณุช.

**ุชูุถุญ ุชฺฉูู**: 
ุงู ูพุงุฑุงูุชุฑ ุงูฺฏูุฑุชู Nagle ุฑุง ุบุฑูุนุงู ูโฺฉูุฏ. ุงูฺฏูุฑุชู Nagle ุฏุฑ ุญุงูุช ุนุงุฏ ูพฺฉุชโูุง ฺฉูฺฺฉ ุฑุง ุจุง ุชุฃุฎุฑ ุงุฑุณุงู ูโฺฉูุฏ ุชุง ุจุชูุงูุฏ ุขูโูุง ุฑุง ุจุง ูพฺฉุชโูุง ุจุนุฏ ุชุฑฺฉุจ ฺฉูุฏ. ุงู ุฑูุชุงุฑ ุจุฑุง ุงูพูฺฉุดูโูุง ุฒูุงูโุญุณุงุณ ููุงุณุจ ูุณุช.

**ฺุฑุง ููุดู trueุ**
- ฺฉุงูุด latency
- ุจูุจูุฏ ูพุงุณุฎโุฏู real-time
- ุฌููฺฏุฑ ุงุฒ ุชุฃุฎุฑูุง ุบุฑุถุฑูุฑ

**๐ ูุทุงูุนู ุจุดุชุฑ**: ุงฺฏุฑ ุฎูุงุณุชุฏ ุจุดุชุฑ ุฏุฑููุฑุฏ ุงู ููุถูุน ุจุฎูุงูุฏ ูโุชูุงูุฏ ุณุฑฺ ฺฉูุฏ: `tcp nagle Algorithm`

---

## ๐ช **ูุฏุฑุช ฺูุฏ ูพูุฑุช**

ุงฺฏุฑ ุจู ฺฉ ุจุงุฒูโ ูพูุฑุช ฺฏูุด ูโุฏูุฏ (ุญุงูุช ูุงูุช ูพูุฑุช)ุ ูโุชูุงูุฏ ุงู ูพุงุฑุงูุชุฑ ูู ุชูุธู ฺฉูุฏ ุจุฑุง ฺฉูุชุฑู ุจุดุชุฑ

### ๐ง **ุชูุธูุงุช Backend**

```json
"multiport-backend": "iptables"
```

**ฺฏุฒููโูุง ููุฌูุฏ:**
- **`"iptables"`** (ูพุดโูุฑุถ): ุงุณุชูุงุฏู ุงุฒ iptables ุจุฑุง ูุฏุฑุช
- **`"socket"`**: ุงุฌุงุฏ ุณูฺฉุช ูุฌุฒุง ุจุฑุง ูุฑ ูพูุฑุช

### ๐ **ููุงุณู ุฑูุดโูุง**

| ุฑูุด | ูุฒุงุง | ูุนุงุจ | ฺฉุงุฑุจุฑุฏ ุชูุตู ุดุฏู |
|-----|-------|--------|------------------|
| **iptables** | ูุตุฑู ฺฉู CPU/RAMุ ููุงุณโูพุฐุฑ ุจุงูุง | ูุงุจุณุชฺฏ ุจู iptables | ุจุงุฒูโูุง ุจุฒุฑฺฏ ูพูุฑุช |
| **socket** | ฺฉูุชุฑู ุฏููโุชุฑุ ูุณุชูู ุงุฒ iptables | ูุตุฑู ุจุดุชุฑ ููุงุจุน | ุงฺฏุฑ iptables ูุตุจ ูุจุงุดุฏ ุง ููโุฎูุงูุฏ rule ูุงุด ุฏุณุช ุจุฎูุฑุฏ ุชูุณุท ูุงุชุฑูุงู ุง ุฏูุงู ุชุณุช ู ุบุฑู ุฏุงุฑุฏ |

ุงุณุชูุงุฏู ุงุฒ iptables ูุนูููุงู ุจูุชุฑ ุงุณุช.

**ุฏูู**: ูุฎุตูุตุงู ููุช ุจุงุฒู ูพูุฑุช ุจุฒุฑฺฏ ุจุงุดุฏุ ุณุงุฎุชู ุณูฺฉุช ุจุฑุง ูุฑ ูพูุฑุช ุจู ุณุณุชู ูุดุงุฑ ูโุขูุฑุฏ ู ูุตุฑู CPU ู RAM ุฒุงุฏ ูโุดูุฏุ ูู ุฑูุด iptables ุจุฏูู ูุดุงุฑ ุงุถุงู ุงูฺฉุงู ุงู ุฑุง ูโุฏูุฏ ฺฉู ูุง ูุฑ ฺูุฏ ุชุง ูพูุฑุช ุฑุง ฺฏูุด ฺฉูู.

---

## ๐ **ุณุณุชู ุงูููุชโุจูุฏ ู ููโูพูุดุงู**

ููุฏูุง ฺฏูุดโุฏููุฏู ุฏุฑ ูุงุชุฑูุงู ูุงุจูุช ููโูพูุดุงู ุฏุงุฑูุฏ ฺฉู ุนู ูุซูุงู:

- ฒ ุชุง TcpListener ุจู ฺฉ ูพูุฑุช ฺฏูุด ุจุฏููุฏ
- ฺฉ TcpListener ุจู ฺฉ ุจุงุฒู ู ฺฉ TcpListener ุจู ฺฉ ูพูุฑุช ฺฉู ุฏุงุฎู ุจุงุฒู ููุฏ ุงูู ุจูุฏ ฺฏูุด ุจุฏูุฏ

ุฏุฑ ุงู ุญุงูุงุชุ ุงูููุชโูุง ูุดุฎุตโฺฉููุฏู ูุณุชูุฏ ฺฉู ุณูฺฉุช ุจู ฺฉุฏุงู TcpListener ุชุนูู ุฏุงุฑุฏ.

### ๐งฎ **ูุญุงุณุจู ุงูููุช**

**ุงูููุช ูพุงู TcpListener**: ฐ

**ุงูุฒุงุด ุงูููุช**: ุงฺฏุฑ ุชู ุชูุธูุงุชุด ููุงุฏุฑ ุงุฒ ุฌููู ููุงุฑุฏ ุฒุฑ ุจุงุดุฏุ ุจู ุงุฒุง ูุฑ ฺฉุฏุงู ฺฉ ุงูููุช ุจุดุชุฑ ูโุดูุฏ:
- ูุฌูุฏ `whitelist`: +ฑ
- ูุฌูุฏ `blacklist`: +ฑ

### ๐ **ูุซุงู ุนูู**

```json
// Listener ุจุง ุงูููุช ุจุงูุง (ุงูููุช = 1)
{
  "name": "high_priority_listener",
  "type": "TcpListener",
  "settings": {
    "port": 443,
    "whitelist": ["1.1.1.1/32"]
  },
  "next": "next_node_name_1"
}

// Listener ุจุง ุงูููุช ูพุงู (ุงูููุช = 0)
{
  "name": "default_listener", 
  "type": "TcpListener",
  "settings": {
    "port": 443
  },
  "next": "next_node_name_2"
}
```

**ูุญูู ุนููฺฉุฑุฏ**:
ููุช ุงู ุชูุธูุงุช ุฏุงุฏู ูโุดูุฏุ ูุซูุงู ูุฑุถ ฺฉูู ฒ ุชุง TcpListener ุจู ูพูุฑุช ดดณ ฺฏูุด ูโุฏููุฏ:

1. **ฺฉูุงูุช ุจุง IP `1.1.1.1`** โ ุจู `high_priority_listener` ฺฉู whitelist ุฏุงุดุช ูโุฑูุฏ
2. **ฺฉูุงูุช ุจุง IP ุฏฺฏุฑ** โ ุงฺฏุฑ IP ุงุด `1.1.1.1` ูุจุงุดุฏ ูโุฑูุฏ ุจู `default_listener`

**ูฺฉุชู ููู**: blacklist ูู ูููโุทูุฑ ุนูู ูโฺฉูุฏ ู ุงฺฏุฑ IP ุชู blacklist ุจุงุดุฏ ุฑุฏ ูโุดูุฏ.

---

## ๐ **ฺฉูุชุฑู ุฏุณุชุฑุณ IP**

### โ **Whitelist (ูุณุช ุณูุฏ)**

```json
"whitelist": [
  "192.168.1.0/24",     // ฺฉู ุดุจฺฉู ูุญู
  "10.0.0.100/32",      // IP ุฎุงุต
  "203.0.113.0/24"      // ุดุจฺฉู ุดุฑฺฉุช
]
```

### โ **Blacklist (ูุณุช ุณุงู)**

```json
"blacklist": [
  "192.168.1.100/32",   // IP ูุดฺฉูโุณุงุฒ
  "10.0.0.0/8",         // ฺฉู ุฑูุฌ ุฎุตูุต
  "172.16.0.0/12"       // ุดุจฺฉู ูุดฺฉูฺฉ
]
```
ุงู ุชูุธูุงุช whitelist ู blacklist ููุท ุจุฑุง ููโูพูุดุงู ูุณุชูุฏุ ุญุช ุงฺฏุฑ ฺฉ tcp listener ูู ุฏุงุดุชู ุจุงุดุฏ ูโุชูุงูุฏ ุงุณุชูุงุฏู ฺฉูุฏ ู ูุญุฏูุฏุด ฺฉูุฏ.

### ๐ฏ **ฺฉุงุฑุจุฑุฏ ุฏุฑ ุชููู ูุนฺฉูุณ TLS**


ุงู ฺฉุงุฑ ุจุฎุตูุต ุชู ุฒุฏู ุชููู ูุนฺฉูุณ TLS ฺฉุงุฑุจุฑุฏ ุฏุงุฑุฏุ ููุช ฺฉู ุณุฑูุฑ ุฎุงุฑุฌ ุดูุง ู ฺฉุงุฑุจุฑุงู ุดูุง ููู ูโุฎูุงููุฏ ุจู ูพูุฑุช ดดณ ูุตู ุดููุฏ ู ุฑูุชุงุฑ ุชููู ุจุงุฏ ุฏุฑ ุจุฑุงุจุฑ IP ุณุฑูุฑ ุฎุงุฑุฌ ูุชูุงูุช ุจุงุดุฏ.

**ุณูุงุฑู**: ุณุฑูุฑ ุฎุงุฑุฌ ู ฺฉุงุฑุจุฑุงู ุจู ูพูุฑุช 443 ูุชุตู ูโุดููุฏุ ุงูุง ุฑูุชุงุฑ ุจุฑุง ูุฑ ฺฉุฏุงู ูุชูุงูุช ุงุณุช.

```json
// ุจุฑุง ุณุฑูุฑ ุฎุงุฑุฌ
{
  "name": "foreign_server_listener",
  "type": "TcpListener", 
  "settings": {
    "port": 443,
    "whitelist": ["FOREIGN_SERVER_IP/32"]
  },
  "next": "reverse_tunnel_handler"
}

// ุจุฑุง ฺฉุงุฑุจุฑุงู ุนุงุฏ
{
  "name": "users_listener",
  "type": "TcpListener",
  "settings": {
    "port": 443
  },
  "next": "normal_handler"
}
```

---

## โ๏ธ **ุณุณุชู ุชุนุงุฏู ุจุงุฑ (Load Balancing)**

### ๐ฏ **ููููู ฺฉู**
ุงู ููุฏ ฺฉ ูุงุจูุช load balancing ุณุงุฏูโุง ุฏุงุฑุฏ ฺฉู ุดุงุฏ ุจุฏุฑุฏุชุงู ุจุฎูุฑุฏุ ูู load balancing ูพุดุฑูุชูโุชุฑ ุฏุฑ ููุฏ router ูพุงุฏู ูโุดูุฏ.

ุดูุง ูุซูุงู ฒ ุชุง ููุฏ TcpListener ุฏุงุฑุฏ ฺฉู ูพูุฑุชโูุงุดุงู ููโูพูุดุงู ุฏุงุฑูุฏ ู ูโุฎูุงูุฏ ฺฉุงุฑ ฺฉูุฏ ฺฉุงุฑุจุฑุงู ุจู ุงููุง ูพุฎุด ุดููุฏ.

**ูฺฉุชู ููู**: ฺฉุงุฑุจุฑุงู ููุช ูพุฎุด ูโุดููุฏ ุจุงุฏ ุชุง ูุฏุช ูู ุงฺฏุฑ ฺฉุงูฺฉุดู ุฌุฏุฏ ุฒุฏูุฏ ุฑู ููุงู TcpListener ูุจู ูุตู ุดููุฏ.

ุชุนุงุฏู ุจุงุฑ ุฏุฑ TcpListener ุงูฺฉุงู ุชูุฒุน ฺฉูุงูุชโูุง ุจู ฺูุฏู listener ุฑุง ูุฑุงูู ูโฺฉูุฏ. ุงู ูุงุจูุช ุจุฑุง ุณูุงุฑููุง ฺูุฏ ุณุฑูุฑ ุง ูพุฎุด ุจุงุฑ ุจุณุงุฑ ููุฏ ุงุณุช.

### โ๏ธ **ูพุงุฑุงูุชุฑูุง ุชุนุงุฏู ุจุงุฑ**

```json
{
  "balance-group": "server_group",
  "balance-interval": 60000
}
```

#### **balance-group**
- **ููุน**: String
- **ุชูุถุญ**: ูุงู ฺฏุฑูู ุชุนุงุฏู ุจุฑุง ูุดุฎุต ฺฉุฑุฏู listener ูุง ฺฉู ุจุงุฏ ุฏุฑ ุชูุฒุน ุดุฑฺฉุช ฺฉููุฏ
- **ูุซุงู**: `"iran_servers"`, `"europe_group"`

#### **balance-interval** 
- **ููุน**: Integer (ููโุซุงูู)
- **ูพุดโูุฑุถ**: 60000 (60 ุซุงูู)
- **ุชูุถุญ**: ูุฏุช ุฒูุงู ฺฉู ฺฉูุงูุช ุจู ฺฉ listener ุฎุงุต ูุชุตู ูโูุงูุฏ ูุจู ุงุฒ ุงูฺฉุงู ุชุฎุตุต ูุฌุฏุฏ

### ๐ **ููุทู ุนููฺฉุฑุฏ**

1. **ุงุชุตุงู ุงูู**: ฺฉูุงูุช ุจู ฺฉ ุงุฒ listener ูุง ุชุฎุตุต ูโุงุจุฏ
2. **ููู ุฒูุงู**: ฺฉูุงูุช ุจุฑุง ูุฏุช `balance-interval` ุจู ููุงู listener ูุชุตู ูโูุงูุฏ
3. **ุชุฎุตุต ูุฌุฏุฏ**: ูพุณ ุงุฒ ฺฏุฐุดุช ุฒูุงูุ ฺฉูุงูุช ูโุชูุงูุฏ ุจู listener ุฏฺฏุฑ ููุชูู ุดูุฏ
4. **ุชูุฏุฏ ุฒูุงู**: ูุฑ ุงุชุตุงู ุฌุฏุฏุ ุชุงูุฑ ุฑุง ุงุฒ ุงุจุชุฏุง ุดุฑูุน ูโฺฉูุฏ

### ๐ก **ูุซุงู ุนูู: ุฏู ุณุฑูุฑ ุฎุงุฑุฌ**

ฺฉ ูุซุงู ุจุฎูุงูู ุจุฒูู: ูุฑุถ ฺฉูู ูุง ฺฉ ุณุฑูุฑ ุงุฑุงู ุฏุงุฑู ู ุฏู ุชุง ุฎุงุฑุฌุ ฺฉ ูููุฏ ู ฺฉ ุขููุงู ู ูุง ูโุฎูุงูู ฺฉุงุฑุจุฑุงููุงู ุฑุง ูุตูุดุงู ุฑุง ุจู ูููุฏ ูุตู ฺฉูู ู ูุตูุดุงู ุจู ุขููุงู.

ุจุฑุง ุงูฺฉุงุฑ ฒ ุชุง ููุฏ TcpListener ุชุนุฑู ูโฺฉูู ูุฑุฏู ุฑู ูพูุฑุช ดดณ ู ุณูพุณ ุจุฑุง ูุฑฺฉุฏุงู ูู ฺฉ TcpConnector ุง ุญุงูุง ุจู ูุฑ ุฑูุด ฺฉู ุฎูุงุณุชุฏ ูุตู ุดููุฏ ุจู ุณุฑูุฑ ุฎุงุฑุฌุดุงู.

ุณูพุณ ุฏุฑ ุชูุธูุงุช ุงู ฒ ุชุง ููุฏ TcpListener ุงู ููุงุฏุฑ ุฑุง ุงุถุงูู ูโฺฉูู:

**ุณูุงุฑู**: ฺฉ ุณุฑูุฑ ุงุฑุงูุ ุฏู ุณุฑูุฑ ุฎุงุฑุฌ (ูููุฏ ู ุขููุงู)

```json
// Listener ุจุฑุง ุณุฑูุฑ ูููุฏ
{
  "name": "netherlands_listener",
  "type": "TcpListener",
  "settings": {
    "port": 443,
    "balance-group": "europe_servers",
    "balance-interval": 300000  // 5 ุฏููู
  },
  "next": "netherlands_connector"
}

// Listener ุจุฑุง ุณุฑูุฑ ุขููุงู  
{
  "name": "germany_listener",
  "type": "TcpListener", 
  "settings": {
    "port": 443,
    "balance-group": "europe_servers",
    "balance-interval": 300000  // 5 ุฏููู
  },
  "next": "germany_connector"
}
```

### โฑ๏ธ **ุงููุช balance-interval**

`balance-interval` ุชุนู ูโฺฉูุฏ ฺฉู ูุซูุงู:

ุงฺฏุฑ ฺฉุงุฑุจุฑ ุขูุฏ ู ุจุงุฑ ุงูู ูุฑุงุฑ ุดุฏ ุจู ุขููุงู ูุตู ุดูุฏุ ุงฺฏุฑ ุจุฑูุฏ ถฐ ุซุงูู ุฏฺฏุฑ ุจุงุฏ ุฏูุจุงุฑู ุชุตููโฺฏุฑ ุดูุฏ ฺฉู ุจู ุขููุงู ูุตู ุดูุฏ ุง ูููุฏ.

ุงฺฏุฑ ุฒูุฏุชุฑ ุงุฒ 60 ุซุงูู ุงุฒ ฺฉุงููฺฏุด ุงุณุชูุงุฏู ฺฉูุฏ ูููโุทูุฑ ุจู ุขููุงู ูุตู ูโุดูุฏ ู ถฐ ุซุงูู ุงุฒ ุงูู ุดุฑูุน ูโุดูุฏ.

**ู ุงู ุฎู ููู ุงุณุช**: ุงฺฏุฑ IP ฺฉุงุฑุจุฑ ูุซูุงู ุจุฏูู ูููู ุฒูุงู ุนูุถ ุดูุฏ ุขูโููุช ุณุงุชโูุง ุจุฑุงุด ุฏุฑุณุช ุจุงุฒ ููโุดููุฏ ุง ูุดฺฉู ฺฉูพฺุง ู ุบุฑู ูโุฎูุฑุฏ.

**ูุดฺฉูุงุช interval ฺฉูุชุงู:**
- ุชุบุฑ ูฺฉุฑุฑ ุณุฑูุฑ
- ูุดฺฉูุงุช ฺฉูพฺุง ู ุงุญุฑุงุฒ ููุช
- ุนุฏู ุซุจุงุช ุฌูุณุงุช ฺฉุงุฑุจุฑ

**ูุดฺฉูุงุช interval ุทููุงู:**
- ุนุฏู ุชูุฒุน ููุงุณุจ ุจุงุฑ
- ฺุณุจุฏฺฏ ฺฉูุงูุชโูุง ุจู ุณุฑูุฑ ูุงุญุฏ

**ุชูุตู**: ุจุฑุง ฺฉุงุฑุจุฑุฏ ุนูููุ 5-10 ุฏููู ููุงุณุจ ุงุณุช.

---

## ๐ **ุชูุธูุงุช Interface**

```json
"interface": "eth0"
```

### ๐ **ฺฉุงุฑุจุฑุฏ**
ุงู ุจุฏุฑุฏ ููุช ูโุฎูุฑุฏ ฺฉู ฺูุฏ ฺฉุงุฑุช ุดุจฺฉู ุฏุงุฑุฏ ู ูโุฎูุงูุฏ ุงู TcpListener ุฑู ฺฉ ุงุฒ ุขูโูุง ุณูุงุฑ ุดูุฏ.


**ูุซุงูโูุง ูุนููู:**
- `"eth0"`: ฺฉุงุฑุช ุดุจฺฉู ุงุตู
- `"eth1"`: ฺฉุงุฑุช ุดุจฺฉู ุซุงููู  
- `"tun0"`: Interface ุชููู
- `"br0"`: Bridge interface

**โ๏ธ ูฺฉุชู**: ุฏุฑ ุบุฑ ุงู ุตูุฑุช ฺฉุงุฑุจุฑุฏ ูุฏุงุฑุฏ. ุฏุฑ ุงฺฉุซุฑ ููุงุฑุฏ ูุงุฒ ุจู ุชูุธู ุงู ูพุงุฑุงูุชุฑ ูุณุช.

---

## ๐ฏ **ูุซุงูโูุง ฺฉุงุฑุจุฑุฏ**

### ๐น **1. Listener ุณุงุฏู**

```json
{
  "name": "simple_web_listener",
  "type": "TcpListener",
  "settings": {
    "address": "0.0.0.0",
    "port": 8443,
    "nodelay": true
  },
  "next": "web_handler"
}
```

**ฺฉุงุฑุจุฑุฏ**: ฺฏูุด ุฏุงุฏู ุณุงุฏู ุจู ฺฉ ูพูุฑุช ุจุฑุง ูุจ ุณุฑูุณ

### ๐น **2. Listener ฺูุฏ ูพูุฑุช ุจุง ุจูููโุณุงุฒ**

```json
{
  "name": "gaming_multi_port_listener",
  "type": "TcpListener",
  "settings": {
    "address": "0.0.0.0",
    "port": [7000, 7100],
    "nodelay": true,
    "multiport-backend": "iptables"
  },
  "next": "game_server_handler"
}
```

**ฺฉุงุฑุจุฑุฏ**: ุณุฑูุฑ ุจุงุฒ ุจุง ูพูุฑุชโูุง ูุชุนุฏุฏ ู ุจูููโุณุงุฒ ููุงุจุน

### ๐น **3. Load Balancer ูพุดุฑูุชู**

```json
// Listener ุงูู
{
  "name": "load_balanced_listener_1",
  "type": "TcpListener",
  "settings": {
    "address": "0.0.0.0", 
    "port": 443,
    "nodelay": true,
    "balance-group": "web_servers",
    "balance-interval": 600000  // 10 ุฏููู
  },
  "next": "server_cluster_1"
}

// Listener ุฏูู
{
  "name": "load_balanced_listener_2",
  "type": "TcpListener",
  "settings": {
    "address": "0.0.0.0",
    "port": 443, 
    "nodelay": true,
    "balance-group": "web_servers",
    "balance-interval": 600000  // 10 ุฏููู
  },
  "next": "server_cluster_2"
}
```

**ฺฉุงุฑุจุฑุฏ**: ุชูุฒุน ุจุงุฑ ุจู ุฏู ฺฉูุงุณุชุฑ ุณุฑูุฑ ุจุง ุซุจุงุช ุฌูุณู

### ๐น **4. ฺฉูุชุฑู ุฏุณุชุฑุณ ูพุดุฑูุชู**

```json
{
  "name": "secure_admin_listener",
  "type": "TcpListener",
  "settings": {
    "address": "0.0.0.0",
    "port": 22,
    "nodelay": true,
    "whitelist": [
      "192.168.1.0/24",      // ุดุจฺฉู ุฏุงุฎู
      "203.0.113.50/32"      // IP ูุฏุฑุช ุฎุงุฑุฌ
    ],
    "blacklist": [
      "10.0.0.100/32"        // IP ูุณุฏูุฏ ุดุฏู
    ]
  },
  "next": "admin_ssh_handler"
}
```

**ฺฉุงุฑุจุฑุฏ**: ุฏุณุชุฑุณ ุงูู SSH ุจุง ฺฉูุชุฑู ุฏูู IP

### ๐น **5. ุชููู ูุนฺฉูุณ TLS**

```json
// ุจุฑุง ุณุฑูุฑ ุฎุงุฑุฌ
{
  "name": "foreign_server_tls_listener",
  "type": "TcpListener",
  "settings": {
    "address": "0.0.0.0",
    "port": 443,
    "nodelay": true,
    "whitelist": ["FOREIGN_SERVER_IP/32"]
  },
  "next": "reverse_tls_tunnel"
}

// ุจุฑุง ฺฉุงุฑุจุฑุงู
{
  "name": "users_tls_listener", 
  "type": "TcpListener",
  "settings": {
    "address": "0.0.0.0",
    "port": 443,
    "nodelay": true
  },
  "next": "user_tls_handler"
}
```

**ฺฉุงุฑุจุฑุฏ**: ูุฏุฑุช ุฌุฏุงฺฏุงูู ุชุฑุงูฺฉ ุณุฑูุฑ ุฎุงุฑุฌ ู ฺฉุงุฑุจุฑุงู ุฑู ฺฉ ูพูุฑุช

---

## โ๏ธ **ูฺฉุงุช ููู ู ุจูุชุฑู ุฑูุดโูุง**

### ๐ฏ **ุจูููโุณุงุฒ ุนููฺฉุฑุฏ**

1. **ููุดู nodelay ูุนุงู**: ุจุฑุง ฺฉุงูุด latency
2. **ุงุณุชูุงุฏู ุงุฒ iptables**: ุจุฑุง ุจุงุฒูโูุง ุจุฒุฑฺฏ ูพูุฑุช
3. **ุชูุธู ููุงุณุจ balance-interval**: ูุชูุงุณุจ ุจุง ููุน ฺฉุงุฑุจุฑุฏ

### ๐ **ุงููุช**

1. **ูุญุฏูุฏ ฺฉุฑุฏู address**: ุฏุฑ ุตูุฑุช ุงูฺฉุงู ุงุฒ `0.0.0.0` ุงุฌุชูุงุจ ฺฉูุฏ
2. **ุงุณุชูุงุฏู ุงุฒ whitelist**: ุจุฑุง ูุญุทโูุง ุญุณุงุณ
3. **ูุงูุชูุฑูฺฏ blacklist**: ุจุฑุง ุดูุงุณุง ุญููุงุช

### ๐๏ธ **ูุนูุงุฑ**

1. **ูููุนุช ุฏุฑ ุฒูุฌุฑ**: ููุดู ุฏุฑ ุงุจุชุฏุง
2. **ุชุนุฑู next node**: ุงุฌุจุงุฑ ุจุฑุง ุนููฺฉุฑุฏ
3. **ุชูฺฉฺฉ ูุธุงู**: ุงุฒ listener ูุง ุฌุฏุงฺฏุงูู ุจุฑุง ููุทูโูุง ูุฎุชูู

### ๐ **ูุงูุชูุฑูฺฏ**

1. **ูพุงุด ุงุชุตุงูุงุช**: ุชุนุฏุงุฏ ู ฺฉูุช
2. **ุจุฑุฑุณ load balancing**: ุชูุฒุน ููุงุณุจ
3. **ฺฉูุชุฑู ููุงุจุน**: CPU ู RAM ุฏุฑ ุญุงูุช ฺูุฏ ูพูุฑุช
